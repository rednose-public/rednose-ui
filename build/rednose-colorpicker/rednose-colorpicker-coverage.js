if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/rednose-colorpicker/rednose-colorpicker.js']) {
   __coverage__['build/rednose-colorpicker/rednose-colorpicker.js'] = {"path":"build/rednose-colorpicker/rednose-colorpicker.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":31},"end":{"line":1,"column":50}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":17},"end":{"line":29,"column":29}}},"3":{"name":"(anonymous_3)","line":34,"loc":{"start":{"line":34,"column":51},"end":{"line":34,"column":64}}},"4":{"name":"(anonymous_4)","line":38,"loc":{"start":{"line":38,"column":51},"end":{"line":38,"column":63}}},"5":{"name":"(anonymous_5)","line":42,"loc":{"start":{"line":42,"column":49},"end":{"line":42,"column":61}}},"6":{"name":"(anonymous_6)","line":49,"loc":{"start":{"line":49,"column":16},"end":{"line":49,"column":28}}},"7":{"name":"(anonymous_7)","line":53,"loc":{"start":{"line":53,"column":14},"end":{"line":53,"column":26}}},"8":{"name":"(anonymous_8)","line":65,"loc":{"start":{"line":65,"column":24},"end":{"line":65,"column":36}}},"9":{"name":"(anonymous_9)","line":82,"loc":{"start":{"line":82,"column":25},"end":{"line":82,"column":38}}},"10":{"name":"(anonymous_10)","line":95,"loc":{"start":{"line":95,"column":35},"end":{"line":95,"column":48}}},"11":{"name":"(anonymous_11)","line":105,"loc":{"start":{"line":105,"column":16},"end":{"line":105,"column":29}}},"12":{"name":"(anonymous_12)","line":115,"loc":{"start":{"line":115,"column":15},"end":{"line":115,"column":31}}},"13":{"name":"(anonymous_13)","line":138,"loc":{"start":{"line":138,"column":19},"end":{"line":138,"column":30}}},"14":{"name":"(anonymous_14)","line":151,"loc":{"start":{"line":151,"column":23},"end":{"line":151,"column":35}}},"15":{"name":"(anonymous_15)","line":160,"loc":{"start":{"line":160,"column":13},"end":{"line":160,"column":24}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":207,"column":67}},"2":{"start":{"line":5,"column":0},"end":{"line":202,"column":3}},"3":{"start":{"line":30,"column":8},"end":{"line":30,"column":24}},"4":{"start":{"line":32,"column":8},"end":{"line":32,"column":71}},"5":{"start":{"line":34,"column":8},"end":{"line":36,"column":11}},"6":{"start":{"line":35,"column":12},"end":{"line":35,"column":31}},"7":{"start":{"line":38,"column":8},"end":{"line":40,"column":11}},"8":{"start":{"line":39,"column":12},"end":{"line":39,"column":37}},"9":{"start":{"line":42,"column":8},"end":{"line":44,"column":11}},"10":{"start":{"line":43,"column":12},"end":{"line":43,"column":38}},"11":{"start":{"line":46,"column":8},"end":{"line":46,"column":65}},"12":{"start":{"line":50,"column":8},"end":{"line":50,"column":54}},"13":{"start":{"line":54,"column":8},"end":{"line":56,"column":37}},"14":{"start":{"line":58,"column":8},"end":{"line":59,"column":8}},"15":{"start":{"line":59,"column":8},"end":{"line":59,"column":40}},"16":{"start":{"line":60,"column":8},"end":{"line":60,"column":76}},"17":{"start":{"line":66,"column":8},"end":{"line":68,"column":60}},"18":{"start":{"line":70,"column":8},"end":{"line":70,"column":37}},"19":{"start":{"line":71,"column":8},"end":{"line":71,"column":52}},"20":{"start":{"line":73,"column":8},"end":{"line":73,"column":93}},"21":{"start":{"line":74,"column":0},"end":{"line":74,"column":22}},"22":{"start":{"line":75,"column":8},"end":{"line":79,"column":9}},"23":{"start":{"line":76,"column":12},"end":{"line":76,"column":45}},"24":{"start":{"line":78,"column":12},"end":{"line":78,"column":45}},"25":{"start":{"line":83,"column":8},"end":{"line":85,"column":79}},"26":{"start":{"line":87,"column":8},"end":{"line":87,"column":29}},"27":{"start":{"line":89,"column":8},"end":{"line":89,"column":37}},"28":{"start":{"line":91,"column":8},"end":{"line":91,"column":45}},"29":{"start":{"line":92,"column":8},"end":{"line":92,"column":51}},"30":{"start":{"line":93,"column":8},"end":{"line":93,"column":93}},"31":{"start":{"line":95,"column":8},"end":{"line":100,"column":11}},"32":{"start":{"line":97,"column":12},"end":{"line":99,"column":13}},"33":{"start":{"line":98,"column":16},"end":{"line":98,"column":33}},"34":{"start":{"line":102,"column":8},"end":{"line":102,"column":34}},"35":{"start":{"line":106,"column":8},"end":{"line":112,"column":9}},"36":{"start":{"line":107,"column":12},"end":{"line":109,"column":44}},"37":{"start":{"line":111,"column":12},"end":{"line":111,"column":52}},"38":{"start":{"line":116,"column":8},"end":{"line":116,"column":52}},"39":{"start":{"line":117,"column":12},"end":{"line":117,"column":37}},"40":{"start":{"line":119,"column":8},"end":{"line":124,"column":9}},"41":{"start":{"line":120,"column":12},"end":{"line":123,"column":14}},"42":{"start":{"line":126,"column":8},"end":{"line":129,"column":59}},"43":{"start":{"line":131,"column":8},"end":{"line":136,"column":4}},"44":{"start":{"line":139,"column":8},"end":{"line":142,"column":39}},"45":{"start":{"line":144,"column":8},"end":{"line":144,"column":39}},"46":{"start":{"line":145,"column":8},"end":{"line":145,"column":39}},"47":{"start":{"line":147,"column":8},"end":{"line":149,"column":88}},"48":{"start":{"line":151,"column":8},"end":{"line":155,"column":8}},"49":{"start":{"line":152,"column":12},"end":{"line":152,"column":43}},"50":{"start":{"line":155,"column":8},"end":{"line":155,"column":29}},"51":{"start":{"line":157,"column":8},"end":{"line":157,"column":31}},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":38}},"53":{"start":{"line":163,"column":8},"end":{"line":167,"column":10}},"54":{"start":{"line":169,"column":8},"end":{"line":173,"column":64}},"55":{"start":{"line":175,"column":8},"end":{"line":175,"column":19}},"56":{"start":{"line":204,"column":0},"end":{"line":204,"column":49}}},"branchMap":{"1":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]},"2":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":12},"end":{"line":97,"column":12}},{"start":{"line":97,"column":12},"end":{"line":97,"column":12}}]},"3":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"4":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":8},"end":{"line":119,"column":8}},{"start":{"line":119,"column":8},"end":{"line":119,"column":8}}]}},"code":["(function () { YUI.add('rednose-colorpicker', function (Y, NAME) {","","/*jshint boss:true, expr:true, onevar:false */","","var Colorpicker = Y.Base.create('colorpicker', Y.Widget, [], {","","    // -- Public Properties ----------------------------------------------------","","    template:","        '<div class=\"input-append\">' +","            '<input type=\"text\" id=\"color\" value=\"#FFFFFF\" readonly=\"true\" />' +","            '<button title=\"Configure table\" type=\"button\" class=\"btn\">' +","                '<i class=\"icon-adjust\"></i>' +","            '</button>' +","        '</div>',","","    // -- Proteced Properties --------------------------------------------------","","    _canvas: null,","","    _imageObj: null,","","    _imageData: null,","","    _mouseActive: false,","","    // -- Lifecycle methods ----------------------------------------------------","","    initializer: function () {","        var self = this;","","        this._canvas = Y.Node.create('<canvas></canvas>').getDOMNode();","","        this._canvas.addEventListener('mousemove', function (e) {","            self._mouseOver(e);","        });","","        this._canvas.addEventListener('mousedown', function () {","            self._mouseActive = true;","        });","","        this._canvas.addEventListener('mouseup', function () {","            self._mouseActive = false;","        });","","        this.after('colorChange', this._handleColorChange, this);","    },","","    destructor: function () {","        this._canvas.removeEventListener('mousemove');","    },","","    renderUI: function () {","        var self       = this,","            container  = this.get('contentBox'),","            colorImage = new Image();","","        container.addClass('rednose-colorpicker')","        container.append(this.template);","        container.one('button').on('click', this._handleColorClicked, this);","    },","","    // -- Protected methods ----------------------------------------------------","","    _handleColorChange: function () {","        var color    = this.get('color'),","            hexColor = this.get('hex').toUpperCase(),","            input    = this.get('contentBox').one('#color');","","        input.set('value', hexColor);","        input.setStyle('backgroundColor', hexColor);","","        contrast = 1 - ( 0.299 * color.red + 0.587 * color.green + 0.114 * color.blue) / 255;","console.log(contrast);","        if (contrast < 0.5) {","            input.setStyle('color', 'black');","        } else {","            input.setStyle('color', 'white');","        }","    },","","    _handleColorClicked: function (e) {","        var container = this.get('contentBox'),","            button    = e.currentTarget,","            overlay   = new Y.Node.create('<div class=\"dropdown-menu\"></div>');","","        this._renderCanvas();","","        overlay.append(this._canvas);","","        overlay.setStyle('display', 'block');","        overlay.setStyle('left', container.getX());","        overlay.setStyle('top', button.getY() + parseInt(button.getComputedStyle('height')));","","        overlay.on('clickoutside', function (e) {","            // Prevent close on open","            if (e.target !== button) {","                overlay.remove();","            }","        });","","        container.append(overlay);","    },","","    _mouseOver: function (e) {","        if (this._mouseActive === true) {","            var rect = this._canvas.getBoundingClientRect(),","                x    = e.clientX - rect.left,","                y    = e.clientY - rect.top;","","            this.set('color', this._getColor(x, y));","        }","    },","","    _getColor: function (x, y) {","        var context = this._canvas.getContext('2d');","            imgObj  = this._imageObj;","","        if (this._imageData === null) {","            this._imageData = context.getImageData(","                0, 0,","                imgObj.height, imgObj.width","            );","        }","","        var data  = this._imageData.data,","            red   = data[((imgObj.width * y) + x) * 4],","            green = data[((imgObj.width * y) + x) * 4 + 1],","            blue  = data[((imgObj.width * y) + x) * 4 + 2];","","        return {","            red: red,","            green: green,","            blue: blue","        }","    },","","    _renderCanvas: function() {","        var container    = this.get('contentBox'),","            bufferCanvas = Y.Node.create('<canvas class=\"buffer\" />'),","            context      = this._canvas.getContext('2d'),","            image        = new Image();","","        container.append(bufferCanvas);","        container.append(this._canvas);","","        var imageUrl =","            bufferCanvas.getStyle('backgroundImage')","            .replace('url(', '').replace(/'/, '').replace(/\"/g, '').replace(/[)]/g, '');","","        image.onload = function () {","            context.drawImage(image, 0, 0);","        }","","        image.src = imageUrl;","","        this._imageObj = image;","    },","","    _getHex: function() {","        var color = this.get('color');","","        rgb = [","            color.red.toString(),","            color.green.toString(),","            color.blue.toString()","        ];","","        var hex =","            \"#\" +","            (\"0\" + parseInt(rgb[0], 10).toString(16)).slice(-2) +","            (\"0\" + parseInt(rgb[1], 10).toString(16)).slice(-2) +","            (\"0\" + parseInt(rgb[2], 10).toString(16)).slice(-2);","","        return hex;","    }","}, {","    ATTRS: {","        /**","         * Color object","         *","         * @attribute {Object} {red, green, blue}","         */","        color: {","            value: {","                green: 0,","                red  : 0,","                blue : 0","            }","        },","","        /**","         * Color value in hex","         *","         * @attribute {string}","         */","        hex: {","            value: null,","            getter: '_getHex'","        }","    }","});","","Y.namespace('Rednose').Colorpicker = Colorpicker;","","","}, '1.5.0-DEV', {\"requires\": [\"base\", \"event\", \"node\", \"widget\"]});","","}());"]};
}
var __cov_Jt9MzXu0OBPzTvIi2itf$Q = __coverage__['build/rednose-colorpicker/rednose-colorpicker.js'];
__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['1']++;YUI.add('rednose-colorpicker',function(Y,NAME){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['1']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['2']++;var Colorpicker=Y.Base.create('colorpicker',Y.Widget,[],{template:'<div class="input-append">'+'<input type="text" id="color" value="#FFFFFF" readonly="true" />'+'<button title="Configure table" type="button" class="btn">'+'<i class="icon-adjust"></i>'+'</button>'+'</div>',_canvas:null,_imageObj:null,_imageData:null,_mouseActive:false,initializer:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['2']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['3']++;var self=this;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['4']++;this._canvas=Y.Node.create('<canvas></canvas>').getDOMNode();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['5']++;this._canvas.addEventListener('mousemove',function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['3']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['6']++;self._mouseOver(e);});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['7']++;this._canvas.addEventListener('mousedown',function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['4']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['8']++;self._mouseActive=true;});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['9']++;this._canvas.addEventListener('mouseup',function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['5']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['10']++;self._mouseActive=false;});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['11']++;this.after('colorChange',this._handleColorChange,this);},destructor:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['6']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['12']++;this._canvas.removeEventListener('mousemove');},renderUI:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['7']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['13']++;var self=this,container=this.get('contentBox'),colorImage=new Image();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['14']++;container.addClass('rednose-colorpicker');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['15']++;container.append(this.template);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['16']++;container.one('button').on('click',this._handleColorClicked,this);},_handleColorChange:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['8']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['17']++;var color=this.get('color'),hexColor=this.get('hex').toUpperCase(),input=this.get('contentBox').one('#color');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['18']++;input.set('value',hexColor);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['19']++;input.setStyle('backgroundColor',hexColor);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['20']++;contrast=1-(0.299*color.red+0.587*color.green+0.114*color.blue)/255;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['21']++;console.log(contrast);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['22']++;if(contrast<0.5){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['1'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['23']++;input.setStyle('color','black');}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['1'][1]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['24']++;input.setStyle('color','white');}},_handleColorClicked:function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['9']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['25']++;var container=this.get('contentBox'),button=e.currentTarget,overlay=new Y.Node.create('<div class="dropdown-menu"></div>');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['26']++;this._renderCanvas();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['27']++;overlay.append(this._canvas);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['28']++;overlay.setStyle('display','block');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['29']++;overlay.setStyle('left',container.getX());__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['30']++;overlay.setStyle('top',button.getY()+parseInt(button.getComputedStyle('height')));__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['31']++;overlay.on('clickoutside',function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['10']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['32']++;if(e.target!==button){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['2'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['33']++;overlay.remove();}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['2'][1]++;}});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['34']++;container.append(overlay);},_mouseOver:function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['11']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['35']++;if(this._mouseActive===true){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['3'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['36']++;var rect=this._canvas.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['37']++;this.set('color',this._getColor(x,y));}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['3'][1]++;}},_getColor:function(x,y){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['12']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['38']++;var context=this._canvas.getContext('2d');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['39']++;imgObj=this._imageObj;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['40']++;if(this._imageData===null){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['4'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['41']++;this._imageData=context.getImageData(0,0,imgObj.height,imgObj.width);}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['4'][1]++;}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['42']++;var data=this._imageData.data,red=data[(imgObj.width*y+x)*4],green=data[(imgObj.width*y+x)*4+1],blue=data[(imgObj.width*y+x)*4+2];__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['43']++;return{red:red,green:green,blue:blue};},_renderCanvas:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['13']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['44']++;var container=this.get('contentBox'),bufferCanvas=Y.Node.create('<canvas class="buffer" />'),context=this._canvas.getContext('2d'),image=new Image();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['45']++;container.append(bufferCanvas);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['46']++;container.append(this._canvas);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['47']++;var imageUrl=bufferCanvas.getStyle('backgroundImage').replace('url(','').replace(/'/,'').replace(/"/g,'').replace(/[)]/g,'');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['48']++;image.onload=function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['14']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['49']++;context.drawImage(image,0,0);};__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['50']++;image.src=imageUrl;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['51']++;this._imageObj=image;},_getHex:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['15']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['52']++;var color=this.get('color');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['53']++;rgb=[color.red.toString(),color.green.toString(),color.blue.toString()];__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['54']++;var hex='#'+('0'+parseInt(rgb[0],10).toString(16)).slice(-2)+('0'+parseInt(rgb[1],10).toString(16)).slice(-2)+('0'+parseInt(rgb[2],10).toString(16)).slice(-2);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['55']++;return hex;}},{ATTRS:{color:{value:{green:0,red:0,blue:0}},hex:{value:null,getter:'_getHex'}}});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['56']++;Y.namespace('Rednose').Colorpicker=Colorpicker;},'1.5.0-DEV',{'requires':['base','event','node','widget']});
