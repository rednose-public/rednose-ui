if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/rednose-colorpicker/rednose-colorpicker.js']) {
   __coverage__['build/rednose-colorpicker/rednose-colorpicker.js'] = {"path":"build/rednose-colorpicker/rednose-colorpicker.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":31},"end":{"line":1,"column":50}}},"2":{"name":"(anonymous_2)","line":58,"loc":{"start":{"line":58,"column":17},"end":{"line":58,"column":29}}},"3":{"name":"(anonymous_3)","line":64,"loc":{"start":{"line":64,"column":51},"end":{"line":64,"column":64}}},"4":{"name":"(anonymous_4)","line":68,"loc":{"start":{"line":68,"column":51},"end":{"line":68,"column":64}}},"5":{"name":"(anonymous_5)","line":73,"loc":{"start":{"line":73,"column":64},"end":{"line":73,"column":76}}},"6":{"name":"(anonymous_6)","line":78,"loc":{"start":{"line":78,"column":49},"end":{"line":78,"column":61}}},"7":{"name":"(anonymous_7)","line":82,"loc":{"start":{"line":82,"column":62},"end":{"line":82,"column":74}}},"8":{"name":"(anonymous_8)","line":89,"loc":{"start":{"line":89,"column":16},"end":{"line":89,"column":28}}},"9":{"name":"(anonymous_9)","line":97,"loc":{"start":{"line":97,"column":14},"end":{"line":97,"column":26}}},"10":{"name":"(anonymous_10)","line":111,"loc":{"start":{"line":111,"column":24},"end":{"line":111,"column":36}}},"11":{"name":"(anonymous_11)","line":146,"loc":{"start":{"line":146,"column":25},"end":{"line":146,"column":38}}},"12":{"name":"(anonymous_12)","line":160,"loc":{"start":{"line":160,"column":39},"end":{"line":160,"column":52}}},"13":{"name":"(anonymous_13)","line":183,"loc":{"start":{"line":183,"column":30},"end":{"line":183,"column":43}}},"14":{"name":"(anonymous_14)","line":199,"loc":{"start":{"line":199,"column":25},"end":{"line":199,"column":37}}},"15":{"name":"(anonymous_15)","line":215,"loc":{"start":{"line":215,"column":16},"end":{"line":215,"column":29}}},"16":{"name":"(anonymous_16)","line":226,"loc":{"start":{"line":226,"column":15},"end":{"line":226,"column":31}}},"17":{"name":"(anonymous_17)","line":249,"loc":{"start":{"line":249,"column":19},"end":{"line":249,"column":30}}},"18":{"name":"(anonymous_18)","line":266,"loc":{"start":{"line":266,"column":23},"end":{"line":266,"column":35}}},"19":{"name":"(anonymous_19)","line":275,"loc":{"start":{"line":275,"column":16},"end":{"line":275,"column":32}}},"20":{"name":"(anonymous_20)","line":281,"loc":{"start":{"line":281,"column":13},"end":{"line":281,"column":28}}},"21":{"name":"(anonymous_21)","line":297,"loc":{"start":{"line":297,"column":13},"end":{"line":297,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":350,"column":67}},"2":{"start":{"line":11,"column":0},"end":{"line":11,"column":26}},"3":{"start":{"line":20,"column":0},"end":{"line":345,"column":3}},"4":{"start":{"line":59,"column":8},"end":{"line":59,"column":24}},"5":{"start":{"line":61,"column":8},"end":{"line":61,"column":131}},"6":{"start":{"line":62,"column":8},"end":{"line":62,"column":83}},"7":{"start":{"line":64,"column":8},"end":{"line":66,"column":11}},"8":{"start":{"line":65,"column":12},"end":{"line":65,"column":31}},"9":{"start":{"line":68,"column":8},"end":{"line":71,"column":11}},"10":{"start":{"line":69,"column":12},"end":{"line":69,"column":37}},"11":{"start":{"line":70,"column":12},"end":{"line":70,"column":31}},"12":{"start":{"line":73,"column":8},"end":{"line":76,"column":11}},"13":{"start":{"line":74,"column":12},"end":{"line":74,"column":37}},"14":{"start":{"line":78,"column":8},"end":{"line":80,"column":11}},"15":{"start":{"line":79,"column":12},"end":{"line":79,"column":38}},"16":{"start":{"line":82,"column":8},"end":{"line":84,"column":11}},"17":{"start":{"line":83,"column":12},"end":{"line":83,"column":38}},"18":{"start":{"line":86,"column":8},"end":{"line":86,"column":65}},"19":{"start":{"line":90,"column":8},"end":{"line":90,"column":67}},"20":{"start":{"line":91,"column":8},"end":{"line":91,"column":54}},"21":{"start":{"line":93,"column":8},"end":{"line":93,"column":32}},"22":{"start":{"line":94,"column":8},"end":{"line":94,"column":31}},"23":{"start":{"line":98,"column":8},"end":{"line":98,"column":48}},"24":{"start":{"line":100,"column":8},"end":{"line":100,"column":50}},"25":{"start":{"line":101,"column":8},"end":{"line":101,"column":40}},"26":{"start":{"line":104,"column":8},"end":{"line":104,"column":98}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":79}},"28":{"start":{"line":106,"column":8},"end":{"line":106,"column":76}},"29":{"start":{"line":112,"column":8},"end":{"line":114,"column":60}},"30":{"start":{"line":116,"column":8},"end":{"line":122,"column":9}},"31":{"start":{"line":117,"column":12},"end":{"line":117,"column":35}},"32":{"start":{"line":118,"column":12},"end":{"line":118,"column":57}},"33":{"start":{"line":119,"column":12},"end":{"line":119,"column":45}},"34":{"start":{"line":121,"column":12},"end":{"line":121,"column":19}},"35":{"start":{"line":124,"column":8},"end":{"line":124,"column":37}},"36":{"start":{"line":125,"column":8},"end":{"line":125,"column":52}},"37":{"start":{"line":127,"column":8},"end":{"line":127,"column":96}},"38":{"start":{"line":129,"column":8},"end":{"line":133,"column":9}},"39":{"start":{"line":130,"column":12},"end":{"line":130,"column":45}},"40":{"start":{"line":132,"column":12},"end":{"line":132,"column":45}},"41":{"start":{"line":135,"column":8},"end":{"line":143,"column":9}},"42":{"start":{"line":136,"column":12},"end":{"line":138,"column":72}},"43":{"start":{"line":140,"column":12},"end":{"line":140,"column":43}},"44":{"start":{"line":141,"column":12},"end":{"line":141,"column":45}},"45":{"start":{"line":142,"column":12},"end":{"line":142,"column":44}},"46":{"start":{"line":147,"column":8},"end":{"line":150,"column":29}},"47":{"start":{"line":152,"column":8},"end":{"line":176,"column":9}},"48":{"start":{"line":153,"column":12},"end":{"line":153,"column":62}},"49":{"start":{"line":155,"column":12},"end":{"line":155,"column":33}},"50":{"start":{"line":157,"column":12},"end":{"line":157,"column":59}},"51":{"start":{"line":158,"column":12},"end":{"line":158,"column":59}},"52":{"start":{"line":160,"column":12},"end":{"line":167,"column":15}},"53":{"start":{"line":162,"column":16},"end":{"line":166,"column":17}},"54":{"start":{"line":163,"column":20},"end":{"line":163,"column":35}},"55":{"start":{"line":165,"column":20},"end":{"line":165,"column":42}},"56":{"start":{"line":169,"column":12},"end":{"line":169,"column":89}},"57":{"start":{"line":171,"column":12},"end":{"line":171,"column":42}},"58":{"start":{"line":173,"column":12},"end":{"line":173,"column":36}},"59":{"start":{"line":175,"column":12},"end":{"line":175,"column":36}},"60":{"start":{"line":178,"column":8},"end":{"line":178,"column":45}},"61":{"start":{"line":179,"column":8},"end":{"line":179,"column":51}},"62":{"start":{"line":180,"column":8},"end":{"line":180,"column":97}},"63":{"start":{"line":184,"column":8},"end":{"line":184,"column":52}},"64":{"start":{"line":186,"column":8},"end":{"line":190,"column":9}},"65":{"start":{"line":187,"column":12},"end":{"line":187,"column":36}},"66":{"start":{"line":189,"column":12},"end":{"line":189,"column":34}},"67":{"start":{"line":192,"column":8},"end":{"line":196,"column":9}},"68":{"start":{"line":193,"column":12},"end":{"line":193,"column":52}},"69":{"start":{"line":195,"column":12},"end":{"line":195,"column":34}},"70":{"start":{"line":200,"column":8},"end":{"line":202,"column":68}},"71":{"start":{"line":204,"column":8},"end":{"line":204,"column":23}},"72":{"start":{"line":206,"column":8},"end":{"line":206,"column":59}},"73":{"start":{"line":207,"column":8},"end":{"line":207,"column":61}},"74":{"start":{"line":208,"column":8},"end":{"line":208,"column":60}},"75":{"start":{"line":210,"column":8},"end":{"line":210,"column":49}},"76":{"start":{"line":212,"column":8},"end":{"line":212,"column":33}},"77":{"start":{"line":216,"column":8},"end":{"line":223,"column":9}},"78":{"start":{"line":217,"column":12},"end":{"line":219,"column":56}},"79":{"start":{"line":221,"column":12},"end":{"line":221,"column":58}},"80":{"start":{"line":222,"column":12},"end":{"line":222,"column":52}},"81":{"start":{"line":227,"column":8},"end":{"line":228,"column":37}},"82":{"start":{"line":230,"column":8},"end":{"line":235,"column":9}},"83":{"start":{"line":231,"column":12},"end":{"line":234,"column":14}},"84":{"start":{"line":237,"column":8},"end":{"line":240,"column":59}},"85":{"start":{"line":242,"column":8},"end":{"line":246,"column":10}},"86":{"start":{"line":250,"column":8},"end":{"line":254,"column":39}},"87":{"start":{"line":256,"column":8},"end":{"line":258,"column":9}},"88":{"start":{"line":257,"column":12},"end":{"line":257,"column":43}},"89":{"start":{"line":260,"column":8},"end":{"line":260,"column":39}},"90":{"start":{"line":262,"column":8},"end":{"line":264,"column":88}},"91":{"start":{"line":266,"column":8},"end":{"line":270,"column":10}},"92":{"start":{"line":267,"column":12},"end":{"line":267,"column":43}},"93":{"start":{"line":269,"column":12},"end":{"line":269,"column":35}},"94":{"start":{"line":272,"column":8},"end":{"line":272,"column":29}},"95":{"start":{"line":276,"column":8},"end":{"line":276,"column":50}},"96":{"start":{"line":277,"column":8},"end":{"line":277,"column":29}},"97":{"start":{"line":278,"column":8},"end":{"line":278,"column":29}},"98":{"start":{"line":282,"column":8},"end":{"line":282,"column":77}},"99":{"start":{"line":284,"column":8},"end":{"line":292,"column":9}},"100":{"start":{"line":285,"column":12},"end":{"line":289,"column":15}},"101":{"start":{"line":291,"column":12},"end":{"line":291,"column":53}},"102":{"start":{"line":294,"column":8},"end":{"line":294,"column":20}},"103":{"start":{"line":298,"column":8},"end":{"line":299,"column":23}},"104":{"start":{"line":301,"column":8},"end":{"line":303,"column":9}},"105":{"start":{"line":302,"column":12},"end":{"line":302,"column":22}},"106":{"start":{"line":305,"column":8},"end":{"line":309,"column":10}},"107":{"start":{"line":311,"column":8},"end":{"line":315,"column":64}},"108":{"start":{"line":317,"column":8},"end":{"line":317,"column":19}},"109":{"start":{"line":347,"column":0},"end":{"line":347,"column":49}}},"branchMap":{"1":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":8},"end":{"line":116,"column":8}},{"start":{"line":116,"column":8},"end":{"line":116,"column":8}}]},"2":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"3":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":8},"end":{"line":135,"column":8}},{"start":{"line":135,"column":8},"end":{"line":135,"column":8}}]},"4":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":8},"end":{"line":152,"column":8}},{"start":{"line":152,"column":8},"end":{"line":152,"column":8}}]},"5":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":16},"end":{"line":162,"column":16}},{"start":{"line":162,"column":16},"end":{"line":162,"column":16}}]},"6":{"line":162,"type":"binary-expr","locations":[{"start":{"line":162,"column":20},"end":{"line":162,"column":39}},{"start":{"line":162,"column":43},"end":{"line":162,"column":82}}]},"7":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":8},"end":{"line":186,"column":8}},{"start":{"line":186,"column":8},"end":{"line":186,"column":8}}]},"8":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":8},"end":{"line":192,"column":8}},{"start":{"line":192,"column":8},"end":{"line":192,"column":8}}]},"9":{"line":206,"type":"binary-expr","locations":[{"start":{"line":206,"column":20},"end":{"line":206,"column":53}},{"start":{"line":206,"column":57},"end":{"line":206,"column":58}}]},"10":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":22},"end":{"line":207,"column":55}},{"start":{"line":207,"column":59},"end":{"line":207,"column":60}}]},"11":{"line":208,"type":"binary-expr","locations":[{"start":{"line":208,"column":21},"end":{"line":208,"column":54}},{"start":{"line":208,"column":58},"end":{"line":208,"column":59}}]},"12":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":8},"end":{"line":216,"column":8}},{"start":{"line":216,"column":8},"end":{"line":216,"column":8}}]},"13":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":8},"end":{"line":230,"column":8}},{"start":{"line":230,"column":8},"end":{"line":230,"column":8}}]},"14":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":8},"end":{"line":256,"column":8}},{"start":{"line":256,"column":8},"end":{"line":256,"column":8}}]},"15":{"line":284,"type":"if","locations":[{"start":{"line":284,"column":8},"end":{"line":284,"column":8}},{"start":{"line":284,"column":8},"end":{"line":284,"column":8}}]},"16":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":8},"end":{"line":301,"column":8}},{"start":{"line":301,"column":8},"end":{"line":301,"column":8}}]}},"code":["(function () { YUI.add('rednose-colorpicker', function (Y, NAME) {","","/*jshint boss:true, expr:true, onevar:false */","","/**"," * Fired when the color value is updated"," *"," * @event close"," * @param {EventFacade} originEvent Original click event."," */","var EVT_UPDATE = 'update';","","/**"," * Colorpicker in form-control style"," *"," * @class Colorpicker"," * @namespace Rednose"," * @constructor"," */","var Colorpicker = Y.Base.create('colorpicker', Y.Widget, [], {","","    // -- Public Properties ----------------------------------------------------","","    template:","        '<div class=\"input-append\">' +","            '<input type=\"text\" placeholder=\"Transparant\" id=\"color\" value=\"#FFFFFF\" />' +","            '<button title=\"Configure table\" type=\"button\" class=\"btn\">' +","                '<i class=\"icon-adjust\"></i>' +","            '</button>' +","        '</div>',","","    overlayTemplate:","        '<div class=\"dropdown-menu\">' +","            '<div id=\"canvas\"></div>' +","            '<div class=\"color-values\">' +","                'R: <input id=\"r\" />, ' +","                'G: <input id=\"g\" />, ' +","                'B: <input id=\"b\" />' +","            '</div>' +","        '</div>',","","    // -- Proteced Properties --------------------------------------------------","","    _canvas: null,","","    _overlay: null,","","    _imageObj: null,","","    _imageData: null,","","    _mouseActive: false,","","    _picker: null,","","    // -- Lifecycle methods ----------------------------------------------------","","    initializer: function () {","        var self = this;","","        this._canvas = Y.Node.create('<canvas class=\"rednose-colorpicker-canvas\" height=\"256\" width=\"256\"></canvas>').getDOMNode();","        this._picker = Y.Node.create('<i class=\"rednose-colorpicker-pointer\"><i>');","","        this._canvas.addEventListener('mousemove', function (e) {","            self._mouseOver(e);","        });","","        this._canvas.addEventListener('mousedown', function (e) {","            self._mouseActive = true;","            self._mouseOver(e);","        });","","        this._picker.getDOMNode().addEventListener('mousedown', function () {","            self._mouseActive = true;","","        });","","        this._canvas.addEventListener('mouseup', function () {","            self._mouseActive = false;","        });","","        this._picker.getDOMNode().addEventListener('mouseup', function () {","            self._mouseActive = false;","        });","","        this.after('colorChange', this._handleColorChange, this);","    },","","    destructor: function () {","        this._picker.getDOMNode().removeEventListener('mousemove');","        this._canvas.removeEventListener('mousemove');","","        this._overlay.destroy();","        this._overlay.remove();","    },","","    renderUI: function () {","        var container  = this.get('contentBox');","","        container.addClass('rednose-colorpicker');","        container.append(this.template);","","        // Bind widget events","        container.one('input#color').on(['change', 'keyup'], this._handleColorInputChanged, this);","        container.one('input#color').on('blur', this._handleColorChange, this);","        container.one('button').on('click', this._handleColorClicked, this);","    },","","    // -- Protected methods ----------------------------------------------------","","    _handleColorChange: function () {","        var color    = this.get('color'),","            hexColor = this.get('hex').toUpperCase(),","            input    = this.get('contentBox').one('#color');","","        if (color === null) {","            input.set('value', '');","            input.setStyle('backgroundColor', '#FFFFFF');","            input.setStyle('color', 'black');","","            return;","        }","","        input.set('value', hexColor);","        input.setStyle('backgroundColor', hexColor);","","        var contrast = 1 - (0.299 * color.red + 0.587 * color.green + 0.114 * color.blue) / 255;","","        if (contrast < 0.5) {","            input.setStyle('color', 'black');","        } else {","            input.setStyle('color', 'white');","        }","","        if (this._overlay) {","            var rValue   = this._overlay.one('.color-values > input#r'),","                gValue   = this._overlay.one('.color-values > input#g'),","                bValue   = this._overlay.one('.color-values > input#b');","","            rValue.set('value', color.red);","            gValue.set('value', color.green);","            bValue.set('value', color.blue);","        }","    },","","    _handleColorClicked: function (e) {","        var self      = this,","            container = this.get('contentBox'),","            button    = e.currentTarget,","            overlay   = null;","","        if (this._overlay === null)  {","            overlay = new Y.Node.create(this.overlayTemplate);","","            this._renderCanvas();","","            overlay.one('div#canvas').append(this._canvas);","            overlay.one('div#canvas').append(this._picker);","","            overlay.on('clickoutside', function (e) {","                // Prevent close on open","                if (e.target !== button && overlay.getStyle('display') === 'block') {","                    overlay.hide();","","                    self.fire(EVT_UPDATE);","                }","            });","","            overlay.all('input').on(['keyup', 'change'], self._onColorValueChange, self);","","            Y.one('body').append(overlay);","","            this._overlay = overlay;","        } else {","            overlay = this._overlay;","        }","","        overlay.setStyle('display', 'block');","        overlay.setStyle('left', container.getX());","        overlay.setStyle('top', button.getY() + parseInt(button.getComputedStyle('height'), 10));","    },","","    _handleColorInputChanged: function (e) {","        var hexValue = e.currentTarget.get('value');","","        if (hexValue === '') {","            this.set('color', null);","","            this.fire(EVT_UPDATE);","        }","","        if (hexValue.match(/^#([0-9a-f]{6})$/i)) {","            this.set('hex', hexValue.toUpperCase());","","            this.fire(EVT_UPDATE);","        }","    },","","    _onColorValueChange: function () {","        var rValue   = this._overlay.one('.color-values > input#r'),","            gValue   = this._overlay.one('.color-values > input#g'),","            bValue   = this._overlay.one('.color-values > input#b');","","        var color = {};","","        color.red = parseInt(rValue.get('value'), 10) || 0;","        color.green = parseInt(gValue.get('value'), 10) || 0;","        color.blue = parseInt(bValue.get('value'), 10) || 0;","","        this._picker.setStyle('display', 'none');","","        this.set('color', color);","    },","","    _mouseOver: function (e) {","        if (this._mouseActive === true) {","            var rect = this._canvas.getBoundingClientRect(),","                x    = Math.round(e.clientX - rect.left),","                y    = Math.round(e.clientY - rect.top);","","            this._setPicker(e.clientX - 3, e.clientY - 3);","            this.set('color', this._getColor(x, y));","        }","    },","","    _getColor: function (x, y) {","        var context = this._canvas.getContext('2d'),","            imgObj  = this._imageObj;","","        if (this._imageData === null) {","            this._imageData = context.getImageData(","                0, 0,","                imgObj.height, imgObj.width","            );","        }","","        var data  = this._imageData.data,","            red   = data[((imgObj.width * y) + x) * 4],","            green = data[((imgObj.width * y) + x) * 4 + 1],","            blue  = data[((imgObj.width * y) + x) * 4 + 2];","","        return {","            red   : red,","            green : green,","            blue  : blue","        };","    },","","    _renderCanvas: function() {","        var self         = this,","            container    = this.get('contentBox'),","            bufferCanvas = Y.Node.create('<canvas height=\"0\" width=\"0\" class=\"buffer\" />'),","            context      = this._canvas.getContext('2d'),","            image        = new Image();","","        if (container.one('canvas.buffer') === null) {","            container.append(bufferCanvas);","        }","","        container.append(this._canvas);","","        var imageUrl =","            bufferCanvas.getStyle('backgroundImage')","            .replace('url(', '').replace(/'/, '').replace(/\"/g, '').replace(/[)]/g, '');","","        image.onload = function () {","            context.drawImage(image, 0, 0);","","            self._imageObj = image;","        };","","        image.src = imageUrl;","    },","","    _setPicker: function (x, y) {","        this._picker.setStyle('display', 'block');","        this._picker.setX(x);","        this._picker.setY(y);","    },","","    _setHex: function (hex) {","        var hexParts = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);","","        if (hexParts !== null) {","            this.set('color', {","                red   : parseInt(hexParts[1], 16),","                green : parseInt(hexParts[2], 16),","                blue  : parseInt(hexParts[3], 16)","            });","","            this._picker.setStyle('display', 'none');","        }","","        return null;","    },","","    _getHex: function () {","        var color = this.get('color'),","            rgb   = [];","","        if (color === null) {","            return '';","        }","","        rgb = [","            color.red.toString(),","            color.green.toString(),","            color.blue.toString()","        ];","","        var hex =","            \"#\" +","            (\"0\" + parseInt(rgb[0], 10).toString(16)).slice(-2) +","            (\"0\" + parseInt(rgb[1], 10).toString(16)).slice(-2) +","            (\"0\" + parseInt(rgb[2], 10).toString(16)).slice(-2);","","        return hex;","    }","}, {","    ATTRS: {","        /**","         * Color object","         *","         * @attribute {Object} {red, green, blue}","         */","        color: {","            value: {","                green: 255,","                red  : 255,","                blue : 255","            }","        },","","        /**","         * Color value in hex","         *","         * @attribute {string}","         */","        hex: {","            value: null,","            getter: '_getHex',","            setter: '_setHex'","        }","    }","});","","Y.namespace('Rednose').Colorpicker = Colorpicker;","","","}, '1.6.0-dev', {\"requires\": [\"base\", \"event\", \"node\", \"widget\"]});","","}());"]};
}
var __cov_Jt9MzXu0OBPzTvIi2itf$Q = __coverage__['build/rednose-colorpicker/rednose-colorpicker.js'];
__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['1']++;YUI.add('rednose-colorpicker',function(Y,NAME){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['1']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['2']++;var EVT_UPDATE='update';__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['3']++;var Colorpicker=Y.Base.create('colorpicker',Y.Widget,[],{template:'<div class="input-append">'+'<input type="text" placeholder="Transparant" id="color" value="#FFFFFF" />'+'<button title="Configure table" type="button" class="btn">'+'<i class="icon-adjust"></i>'+'</button>'+'</div>',overlayTemplate:'<div class="dropdown-menu">'+'<div id="canvas"></div>'+'<div class="color-values">'+'R: <input id="r" />, '+'G: <input id="g" />, '+'B: <input id="b" />'+'</div>'+'</div>',_canvas:null,_overlay:null,_imageObj:null,_imageData:null,_mouseActive:false,_picker:null,initializer:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['2']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['4']++;var self=this;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['5']++;this._canvas=Y.Node.create('<canvas class="rednose-colorpicker-canvas" height="256" width="256"></canvas>').getDOMNode();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['6']++;this._picker=Y.Node.create('<i class="rednose-colorpicker-pointer"><i>');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['7']++;this._canvas.addEventListener('mousemove',function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['3']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['8']++;self._mouseOver(e);});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['9']++;this._canvas.addEventListener('mousedown',function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['4']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['10']++;self._mouseActive=true;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['11']++;self._mouseOver(e);});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['12']++;this._picker.getDOMNode().addEventListener('mousedown',function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['5']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['13']++;self._mouseActive=true;});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['14']++;this._canvas.addEventListener('mouseup',function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['6']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['15']++;self._mouseActive=false;});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['16']++;this._picker.getDOMNode().addEventListener('mouseup',function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['7']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['17']++;self._mouseActive=false;});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['18']++;this.after('colorChange',this._handleColorChange,this);},destructor:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['8']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['19']++;this._picker.getDOMNode().removeEventListener('mousemove');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['20']++;this._canvas.removeEventListener('mousemove');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['21']++;this._overlay.destroy();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['22']++;this._overlay.remove();},renderUI:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['9']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['23']++;var container=this.get('contentBox');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['24']++;container.addClass('rednose-colorpicker');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['25']++;container.append(this.template);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['26']++;container.one('input#color').on(['change','keyup'],this._handleColorInputChanged,this);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['27']++;container.one('input#color').on('blur',this._handleColorChange,this);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['28']++;container.one('button').on('click',this._handleColorClicked,this);},_handleColorChange:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['10']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['29']++;var color=this.get('color'),hexColor=this.get('hex').toUpperCase(),input=this.get('contentBox').one('#color');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['30']++;if(color===null){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['1'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['31']++;input.set('value','');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['32']++;input.setStyle('backgroundColor','#FFFFFF');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['33']++;input.setStyle('color','black');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['34']++;return;}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['1'][1]++;}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['35']++;input.set('value',hexColor);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['36']++;input.setStyle('backgroundColor',hexColor);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['37']++;var contrast=1-(0.299*color.red+0.587*color.green+0.114*color.blue)/255;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['38']++;if(contrast<0.5){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['2'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['39']++;input.setStyle('color','black');}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['2'][1]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['40']++;input.setStyle('color','white');}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['41']++;if(this._overlay){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['3'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['42']++;var rValue=this._overlay.one('.color-values > input#r'),gValue=this._overlay.one('.color-values > input#g'),bValue=this._overlay.one('.color-values > input#b');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['43']++;rValue.set('value',color.red);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['44']++;gValue.set('value',color.green);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['45']++;bValue.set('value',color.blue);}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['3'][1]++;}},_handleColorClicked:function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['11']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['46']++;var self=this,container=this.get('contentBox'),button=e.currentTarget,overlay=null;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['47']++;if(this._overlay===null){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['4'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['48']++;overlay=new Y.Node.create(this.overlayTemplate);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['49']++;this._renderCanvas();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['50']++;overlay.one('div#canvas').append(this._canvas);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['51']++;overlay.one('div#canvas').append(this._picker);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['52']++;overlay.on('clickoutside',function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['12']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['53']++;if((__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['6'][0]++,e.target!==button)&&(__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['6'][1]++,overlay.getStyle('display')==='block')){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['5'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['54']++;overlay.hide();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['55']++;self.fire(EVT_UPDATE);}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['5'][1]++;}});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['56']++;overlay.all('input').on(['keyup','change'],self._onColorValueChange,self);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['57']++;Y.one('body').append(overlay);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['58']++;this._overlay=overlay;}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['4'][1]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['59']++;overlay=this._overlay;}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['60']++;overlay.setStyle('display','block');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['61']++;overlay.setStyle('left',container.getX());__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['62']++;overlay.setStyle('top',button.getY()+parseInt(button.getComputedStyle('height'),10));},_handleColorInputChanged:function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['13']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['63']++;var hexValue=e.currentTarget.get('value');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['64']++;if(hexValue===''){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['7'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['65']++;this.set('color',null);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['66']++;this.fire(EVT_UPDATE);}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['7'][1]++;}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['67']++;if(hexValue.match(/^#([0-9a-f]{6})$/i)){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['8'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['68']++;this.set('hex',hexValue.toUpperCase());__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['69']++;this.fire(EVT_UPDATE);}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['8'][1]++;}},_onColorValueChange:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['14']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['70']++;var rValue=this._overlay.one('.color-values > input#r'),gValue=this._overlay.one('.color-values > input#g'),bValue=this._overlay.one('.color-values > input#b');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['71']++;var color={};__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['72']++;color.red=(__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['9'][0]++,parseInt(rValue.get('value'),10))||(__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['9'][1]++,0);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['73']++;color.green=(__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['10'][0]++,parseInt(gValue.get('value'),10))||(__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['10'][1]++,0);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['74']++;color.blue=(__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['11'][0]++,parseInt(bValue.get('value'),10))||(__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['11'][1]++,0);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['75']++;this._picker.setStyle('display','none');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['76']++;this.set('color',color);},_mouseOver:function(e){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['15']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['77']++;if(this._mouseActive===true){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['12'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['78']++;var rect=this._canvas.getBoundingClientRect(),x=Math.round(e.clientX-rect.left),y=Math.round(e.clientY-rect.top);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['79']++;this._setPicker(e.clientX-3,e.clientY-3);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['80']++;this.set('color',this._getColor(x,y));}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['12'][1]++;}},_getColor:function(x,y){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['16']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['81']++;var context=this._canvas.getContext('2d'),imgObj=this._imageObj;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['82']++;if(this._imageData===null){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['13'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['83']++;this._imageData=context.getImageData(0,0,imgObj.height,imgObj.width);}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['13'][1]++;}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['84']++;var data=this._imageData.data,red=data[(imgObj.width*y+x)*4],green=data[(imgObj.width*y+x)*4+1],blue=data[(imgObj.width*y+x)*4+2];__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['85']++;return{red:red,green:green,blue:blue};},_renderCanvas:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['17']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['86']++;var self=this,container=this.get('contentBox'),bufferCanvas=Y.Node.create('<canvas height="0" width="0" class="buffer" />'),context=this._canvas.getContext('2d'),image=new Image();__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['87']++;if(container.one('canvas.buffer')===null){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['14'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['88']++;container.append(bufferCanvas);}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['14'][1]++;}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['89']++;container.append(this._canvas);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['90']++;var imageUrl=bufferCanvas.getStyle('backgroundImage').replace('url(','').replace(/'/,'').replace(/"/g,'').replace(/[)]/g,'');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['91']++;image.onload=function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['18']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['92']++;context.drawImage(image,0,0);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['93']++;self._imageObj=image;};__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['94']++;image.src=imageUrl;},_setPicker:function(x,y){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['19']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['95']++;this._picker.setStyle('display','block');__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['96']++;this._picker.setX(x);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['97']++;this._picker.setY(y);},_setHex:function(hex){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['20']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['98']++;var hexParts=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['99']++;if(hexParts!==null){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['15'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['100']++;this.set('color',{red:parseInt(hexParts[1],16),green:parseInt(hexParts[2],16),blue:parseInt(hexParts[3],16)});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['101']++;this._picker.setStyle('display','none');}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['15'][1]++;}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['102']++;return null;},_getHex:function(){__cov_Jt9MzXu0OBPzTvIi2itf$Q.f['21']++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['103']++;var color=this.get('color'),rgb=[];__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['104']++;if(color===null){__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['16'][0]++;__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['105']++;return'';}else{__cov_Jt9MzXu0OBPzTvIi2itf$Q.b['16'][1]++;}__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['106']++;rgb=[color.red.toString(),color.green.toString(),color.blue.toString()];__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['107']++;var hex='#'+('0'+parseInt(rgb[0],10).toString(16)).slice(-2)+('0'+parseInt(rgb[1],10).toString(16)).slice(-2)+('0'+parseInt(rgb[2],10).toString(16)).slice(-2);__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['108']++;return hex;}},{ATTRS:{color:{value:{green:255,red:255,blue:255}},hex:{value:null,getter:'_getHex',setter:'_setHex'}}});__cov_Jt9MzXu0OBPzTvIi2itf$Q.s['109']++;Y.namespace('Rednose').Colorpicker=Colorpicker;},'1.6.0-dev',{'requires':['base','event','node','widget']});
