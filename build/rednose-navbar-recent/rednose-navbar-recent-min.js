YUI.add("rednose-navbar-recent",function(e,t){var n="Clear Items",r="recent",i=5,s="disabled",o="divider",u="dropdown-menu",a="dropdown-submenu",f=e.Base.create("recentNavbarPlugin",e.Plugin.Base,[],{_itemNode:null,_node:null,_scope:null,initializer:function(e){var t=this.get("host");this._scope=e.scope,this._node=e.node,t.after("render",this._afterRender,this)},destructor:function(){this._itemNode=null,this._scope=null},addEntry:function(t,n){var s=e.Cookie.getSub(r,this._scope),o={id:t,label:n},u=e.JSON.parse(s)||[];e.each(u,function(e,t){e.id===o.id&&u.splice(t,1)}),u.unshift(o),u.length>i&&u.pop(),s=e.JSON.stringify(u),e.Cookie.setSub(r,this._scope,s),this._renderMenu()},clearEntries:function(){e.Cookie.setSub(r,this._scope,null),this._renderMenu()},_renderMenu:function(){var t=this.get("host"),i=e.JSON.parse(e.Cookie.getSub(r,this._scope));if(!i||!e.Object.size(i)){this._itemNode.addClass(s),this._itemNode.one("ul")&&this._itemNode.one("ul").remove(!0),this._itemNode.hasClass(a)&&this._itemNode.removeClass(a);return}this._itemNode.hasClass(s)&&this._itemNode.removeClass(s),this._itemNode.hasClass(a)||this._itemNode.addClass(a),this._itemNode.one("ul")||this._itemNode.append(e.Node.create('<ul class="'+u+'"></ul>'));var f=this._itemNode.one("ul");f.empty(),e.each(i,function(t){var n=e.Node.create('<li><a tabindex="-1" href="#"></a></li>');n.one("a").setAttribute("data-id",t.id),n.one("a").setContent(t.label),f.append(n)}),f.append(e.Node.create('<li class="'+o+'"></li>')),f.append(e.Node.create(e.Lang.sub('<li><a class="menu-clearitems" tabindex="-1" href="#">{clearItems}</a></li>',{clearItems:n})))},_handleClick:function(e){e.preventDefault();if(e.currentTarget.get("parentNode")===this._itemNode)return;var t=this.get("host"),n=e.currentTarget;if(n.hasClass("menu-clearitems")){this.clearEntries();return}var r=this._itemNode.one("a").getAttribute("data-id"),i=n.getAttribute("data-id");t.fire(r,{id:i})},_afterRender:function(e){var t=this.get("host");this._itemNode=t.getNode(this._node).get("parentNode"),this._itemNode.delegate("click",this._handleClick,"a",this),this._renderMenu()}},{NS:"recent"});e.namespace("Rednose.Navbar").Recent=f},"1.1.0-DEV",{requires:["cookie","plugin","rednose-navbar"]});
