YUI.add("rednose-navbar-recent",function(e,t){e.namespace("Rednose.Navbar").Recent=e.Base.create("recentNavbarPlugin",e.Plugin.Base,[],{_scope:null,initializer:function(t){this._host=t.host;var n=this._host.getNode(t.node);this.node=n,this._scope=t.scope;var r=n.get("parentNode");r.addClass("dropdown-submenu"),r.append(e.Node.create('<ul class="dropdown-menu"></ul>')),this._updateMenuEntries(n)},destructor:function(){this.node=null},addEntry:function(t,n){var r=e.Cookie.getSub("navbar-recent",this._scope),i={id:t,label:n},s=e.JSON.parse(r)||[];e.each(s,function(e,t){e.id===i.id&&s.splice(t,1)}),s.unshift(i),s.length>5&&s.pop(),r=e.JSON.stringify(s),e.Cookie.setSub("navbar-recent",this._scope,r),this._updateMenuEntries(this.node)},_updateMenuEntries:function(t){var n=this,r=e.Cookie.getSub("navbar-recent",this._scope),i=t.ancestor("li").one("ul"),s;i.empty();if(r){s=e.JSON.parse(r),e.each(s,function(t){var r=e.Node.create('<li><a tabindex="-1" href="#"></a></li>');r.one("a").setContent(t.label),i.append(r),r.one("a").on("click",function(){n._host.fire(n.node.getAttribute("data-id"),{id:t.id})})}),s&&i.append(e.Node.create('<li class="divider"></li>'));var o=e.Node.create('<li><a class="menu-clearitems" tabindex="-1" href="#">'+e.Intl.get("docgenadmin-core").clearitems+"</a>"+"</li>");e.Object.size(s)||o.addClass("disabled"),i.append(o),i.one(".menu-clearitems").on("click",function(r){r.preventDefault();var i=r.currentTarget;if(i.ancestor("li").hasClass("disabled")){t.blur();return}e.Cookie.setSub("navbar-recent",n._scope,null),n._updateMenuEntries(t)})}}},{NS:"recent"})},"1.1.0-DEV",{requires:["cookie","plugin","rednose-navbar"]});
