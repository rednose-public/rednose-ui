if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/rednose-dataprovider/rednose-dataprovider.js']) {
   __coverage__['build/rednose-dataprovider/rednose-dataprovider.js'] = {"path":"build/rednose-dataprovider/rednose-dataprovider.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0},"b":{"1":[0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":51}}},"2":{"name":"(anonymous_2)","line":27,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":47}}},"3":{"name":"(anonymous_3)","line":34,"loc":{"start":{"line":34,"column":34},"end":{"line":34,"column":51}}},"4":{"name":"(anonymous_4)","line":37,"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":50}}},"5":{"name":"(anonymous_5)","line":47,"loc":{"start":{"line":47,"column":20},"end":{"line":47,"column":42}}},"6":{"name":"(anonymous_6)","line":52,"loc":{"start":{"line":52,"column":37},"end":{"line":52,"column":58}}},"7":{"name":"(anonymous_7)","line":59,"loc":{"start":{"line":59,"column":38},"end":{"line":59,"column":68}}},"8":{"name":"(anonymous_8)","line":62,"loc":{"start":{"line":62,"column":44},"end":{"line":62,"column":65}}},"9":{"name":"(anonymous_9)","line":122,"loc":{"start":{"line":122,"column":13},"end":{"line":122,"column":25}}},"10":{"name":"(anonymous_10)","line":125,"loc":{"start":{"line":125,"column":18},"end":{"line":125,"column":35}}},"11":{"name":"(anonymous_11)","line":132,"loc":{"start":{"line":132,"column":50},"end":{"line":132,"column":71}}},"12":{"name":"(anonymous_12)","line":145,"loc":{"start":{"line":145,"column":62},"end":{"line":145,"column":86}}},"13":{"name":"(anonymous_13)","line":173,"loc":{"start":{"line":173,"column":11},"end":{"line":173,"column":31}}},"14":{"name":"(anonymous_14)","line":176,"loc":{"start":{"line":176,"column":45},"end":{"line":176,"column":61}}},"15":{"name":"(anonymous_15)","line":193,"loc":{"start":{"line":193,"column":10},"end":{"line":193,"column":47}}},"16":{"name":"(anonymous_16)","line":198,"loc":{"start":{"line":198,"column":30},"end":{"line":198,"column":47}}},"17":{"name":"(anonymous_17)","line":201,"loc":{"start":{"line":201,"column":29},"end":{"line":201,"column":46}}},"18":{"name":"(anonymous_18)","line":241,"loc":{"start":{"line":241,"column":17},"end":{"line":241,"column":28}}},"19":{"name":"(anonymous_19)","line":250,"loc":{"start":{"line":250,"column":31},"end":{"line":250,"column":52}}},"20":{"name":"(anonymous_20)","line":251,"loc":{"start":{"line":251,"column":36},"end":{"line":251,"column":54}}},"21":{"name":"(anonymous_21)","line":264,"loc":{"start":{"line":264,"column":58},"end":{"line":264,"column":70}}},"22":{"name":"(anonymous_22)","line":285,"loc":{"start":{"line":285,"column":32},"end":{"line":285,"column":45}}},"23":{"name":"(anonymous_23)","line":291,"loc":{"start":{"line":291,"column":12},"end":{"line":291,"column":25}}},"24":{"name":"(anonymous_24)","line":299,"loc":{"start":{"line":299,"column":12},"end":{"line":299,"column":25}}},"25":{"name":"(anonymous_25)","line":306,"loc":{"start":{"line":306,"column":24},"end":{"line":306,"column":37}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":348,"column":3}},"2":{"start":{"line":5,"column":0},"end":{"line":9,"column":19}},"3":{"start":{"line":11,"column":0},"end":{"line":16,"column":3}},"4":{"start":{"line":18,"column":0},"end":{"line":24,"column":3}},"5":{"start":{"line":26,"column":0},"end":{"line":88,"column":3}},"6":{"start":{"line":28,"column":8},"end":{"line":44,"column":9}},"7":{"start":{"line":30,"column":16},"end":{"line":41,"column":19}},"8":{"start":{"line":35,"column":28},"end":{"line":35,"column":59}},"9":{"start":{"line":38,"column":28},"end":{"line":38,"column":67}},"10":{"start":{"line":43,"column":12},"end":{"line":43,"column":18}},"11":{"start":{"line":48,"column":8},"end":{"line":49,"column":24}},"12":{"start":{"line":51,"column":8},"end":{"line":77,"column":9}},"13":{"start":{"line":52,"column":12},"end":{"line":57,"column":15}},"14":{"start":{"line":53,"column":16},"end":{"line":56,"column":20}},"15":{"start":{"line":59,"column":12},"end":{"line":76,"column":15}},"16":{"start":{"line":60,"column":16},"end":{"line":60,"column":36}},"17":{"start":{"line":62,"column":16},"end":{"line":67,"column":19}},"18":{"start":{"line":63,"column":20},"end":{"line":66,"column":24}},"19":{"start":{"line":69,"column":16},"end":{"line":73,"column":20}},"20":{"start":{"line":75,"column":16},"end":{"line":75,"column":40}},"21":{"start":{"line":79,"column":8},"end":{"line":79,"column":22}},"22":{"start":{"line":90,"column":0},"end":{"line":97,"column":3}},"23":{"start":{"line":99,"column":0},"end":{"line":108,"column":3}},"24":{"start":{"line":110,"column":0},"end":{"line":117,"column":3}},"25":{"start":{"line":119,"column":0},"end":{"line":208,"column":3}},"26":{"start":{"line":123,"column":8},"end":{"line":123,"column":23}},"27":{"start":{"line":125,"column":8},"end":{"line":159,"column":11}},"28":{"start":{"line":126,"column":12},"end":{"line":130,"column":14}},"29":{"start":{"line":132,"column":12},"end":{"line":156,"column":15}},"30":{"start":{"line":133,"column":16},"end":{"line":155,"column":17}},"31":{"start":{"line":134,"column":20},"end":{"line":137,"column":23}},"32":{"start":{"line":138,"column":23},"end":{"line":155,"column":17}},"33":{"start":{"line":139,"column":20},"end":{"line":143,"column":22}},"34":{"start":{"line":145,"column":20},"end":{"line":152,"column":23}},"35":{"start":{"line":146,"column":24},"end":{"line":151,"column":25}},"36":{"start":{"line":147,"column":28},"end":{"line":150,"column":31}},"37":{"start":{"line":154,"column":20},"end":{"line":154,"column":51}},"38":{"start":{"line":158,"column":12},"end":{"line":158,"column":29}},"39":{"start":{"line":161,"column":8},"end":{"line":170,"column":11}},"40":{"start":{"line":174,"column":8},"end":{"line":174,"column":23}},"41":{"start":{"line":176,"column":8},"end":{"line":188,"column":11}},"42":{"start":{"line":177,"column":12},"end":{"line":187,"column":13}},"43":{"start":{"line":179,"column":20},"end":{"line":179,"column":56}},"44":{"start":{"line":180,"column":20},"end":{"line":180,"column":26}},"45":{"start":{"line":182,"column":20},"end":{"line":182,"column":52}},"46":{"start":{"line":183,"column":20},"end":{"line":183,"column":26}},"47":{"start":{"line":185,"column":20},"end":{"line":185,"column":52}},"48":{"start":{"line":186,"column":20},"end":{"line":186,"column":26}},"49":{"start":{"line":190,"column":8},"end":{"line":190,"column":21}},"50":{"start":{"line":194,"column":8},"end":{"line":206,"column":9}},"51":{"start":{"line":195,"column":12},"end":{"line":205,"column":15}},"52":{"start":{"line":199,"column":24},"end":{"line":199,"column":55}},"53":{"start":{"line":202,"column":24},"end":{"line":202,"column":63}},"54":{"start":{"line":210,"column":0},"end":{"line":210,"column":67}},"55":{"start":{"line":211,"column":0},"end":{"line":211,"column":76}},"56":{"start":{"line":212,"column":0},"end":{"line":212,"column":70}},"57":{"start":{"line":213,"column":0},"end":{"line":213,"column":66}},"58":{"start":{"line":214,"column":0},"end":{"line":214,"column":66}},"59":{"start":{"line":215,"column":0},"end":{"line":215,"column":71}},"60":{"start":{"line":216,"column":0},"end":{"line":216,"column":17}},"61":{"start":{"line":218,"column":0},"end":{"line":330,"column":3}},"62":{"start":{"line":242,"column":8},"end":{"line":248,"column":54}},"63":{"start":{"line":250,"column":8},"end":{"line":261,"column":10}},"64":{"start":{"line":251,"column":12},"end":{"line":260,"column":15}},"65":{"start":{"line":252,"column":16},"end":{"line":259,"column":18}},"66":{"start":{"line":263,"column":8},"end":{"line":263,"column":106}},"67":{"start":{"line":264,"column":8},"end":{"line":266,"column":11}},"68":{"start":{"line":265,"column":12},"end":{"line":265,"column":39}},"69":{"start":{"line":268,"column":8},"end":{"line":271,"column":45}},"70":{"start":{"line":273,"column":8},"end":{"line":283,"column":11}},"71":{"start":{"line":285,"column":8},"end":{"line":287,"column":11}},"72":{"start":{"line":286,"column":12},"end":{"line":286,"column":44}},"73":{"start":{"line":289,"column":8},"end":{"line":295,"column":10}},"74":{"start":{"line":292,"column":16},"end":{"line":292,"column":87}},"75":{"start":{"line":293,"column":16},"end":{"line":293,"column":72}},"76":{"start":{"line":297,"column":8},"end":{"line":303,"column":10}},"77":{"start":{"line":300,"column":16},"end":{"line":300,"column":90}},"78":{"start":{"line":301,"column":16},"end":{"line":301,"column":89}},"79":{"start":{"line":307,"column":8},"end":{"line":307,"column":25}},"80":{"start":{"line":309,"column":8},"end":{"line":309,"column":28}},"81":{"start":{"line":311,"column":8},"end":{"line":320,"column":9}},"82":{"start":{"line":312,"column":12},"end":{"line":312,"column":22}},"83":{"start":{"line":314,"column":12},"end":{"line":316,"column":13}},"84":{"start":{"line":315,"column":16},"end":{"line":315,"column":33}},"85":{"start":{"line":318,"column":12},"end":{"line":318,"column":29}},"86":{"start":{"line":319,"column":12},"end":{"line":319,"column":22}},"87":{"start":{"line":332,"column":0},"end":{"line":332,"column":51}}},"branchMap":{"1":{"line":28,"type":"switch","locations":[{"start":{"line":29,"column":12},"end":{"line":43,"column":18}}]},"2":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":8}},{"start":{"line":51,"column":8},"end":{"line":51,"column":8}}]},"3":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":16},"end":{"line":133,"column":16}},{"start":{"line":133,"column":16},"end":{"line":133,"column":16}}]},"4":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":23},"end":{"line":138,"column":23}},{"start":{"line":138,"column":23},"end":{"line":138,"column":23}}]},"5":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":24},"end":{"line":146,"column":24}},{"start":{"line":146,"column":24},"end":{"line":146,"column":24}}]},"6":{"line":177,"type":"switch","locations":[{"start":{"line":178,"column":16},"end":{"line":180,"column":26}},{"start":{"line":181,"column":16},"end":{"line":183,"column":26}},{"start":{"line":184,"column":16},"end":{"line":186,"column":26}}]},"7":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":8},"end":{"line":194,"column":8}},{"start":{"line":194,"column":8},"end":{"line":194,"column":8}}]},"8":{"line":311,"type":"if","locations":[{"start":{"line":311,"column":8},"end":{"line":311,"column":8}},{"start":{"line":311,"column":8},"end":{"line":311,"column":8}}]},"9":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":12},"end":{"line":314,"column":12}},{"start":{"line":314,"column":12},"end":{"line":314,"column":12}}]}},"code":["(function () { YUI.add('rednose-dataprovider', function (Y, NAME) {","","/*jshint boss:true, expr:true, onevar:false */","","var TreeModel = Y.Rednose.ModelTree,","    DataSource,","    PdoSource,","    XmlSource,","    DataSourceList;","","DataSourceAttribute = Y.Base.create('dataSourceAttribute', Y.Model, [], {}, {","    ATTRS: {","        source: { value: null },","        name  : { value: null }","    }","});","","DataSourceAttributeCollection = Y.Base.create('dataSourceAttributeCollection', Y.Model, [], {}, {","    ATTRS: {","        source    : { value: null },","        name      : { value: null },","        attributes: { value: [] }","    }","});","","DataSource = Y.Base.create('dataSource', Y.Model, [], {","    sync: function (action, options, callback) {","        switch (action) {","            case 'create':","                Y.io(Routing.generate('rednose_dataprovider_post_data_sources'), {","                    method: 'POST',","                    data: Y.JSON.stringify(this.toJSON()),","                    on : {","                        success : function (tx, r) {","                            callback(null, r.responseText);","                        },","                        failure: function (tx, r) {","                            callback(Y.JSON.parse(r.responseText));","                        }","                    }","                });","","            break;","        }","    },","","    _setAttributes: function (attributes) {","        var self   = this,","            parsed = [];","","        if (Y.Lang.isArray(attributes)) {","            Y.Array.each(attributes, function (attribute) {","                parsed.push(new DataSourceAttribute({","                    source: self,","                    name  : attribute","                }));","            });","        } else {","            Y.Object.each(attributes, function (subAttributes, key) {","                var collection = [];","","                Y.Array.each(subAttributes, function (attribute) {","                    collection.push(new DataSourceAttribute({","                        source: self,","                        name  : attribute","                    }));","                });","","                parsed.push(new DataSourceAttributeCollection({","                    source    : self,","                    name      : key,","                    attributes: collection","                }));","","                parsed.push(collection);","            });","        }","","        return parsed;","    }","}, {","    ATTRS: {","        name      : { value: null },","        identifier: { value: null },","        type      : { value: 'pdo' },","        attributes: { value: [], setter: '_setAttributes', lazyAdd: false }","    }","});","","DatagenSource = Y.Base.create('datagenSource', DataSource, [], {}, {","    ATTRS: {","        url     : { value: null },","        username: { value: null },","        password: { value: null },","        section : { value: null }","    }","});","","PdoSource = Y.Base.create('pdoSource', DataSource, [], {}, {","    ATTRS: {","        dsn     : { value: null },","        username: { value: null },","        password: { value: null },","        table   : { value: null },","        query   : { value: null },","        source  : { value: 'table' }","    }","});","","XmlSource = Y.Base.create('xmlSource', DataSource, [], {}, {","    ATTRS: {","        xsd : { value: null },","        xslt: { value: null },","        xml : { value: null },","        root: { value: null }","    }","});","","DataSourceList = Y.Base.create('dataSourceList', Y.ModelList, [], {","    model: DataSource,","","    getTree: function () {","        var items = [];","","        this.each(function (model) {","            var node = {","                label   : model.get('name'),","                data    : model,","                children: []","            };","","            Y.Array.each(model.get('attributes'), function (attribute) {","                if (attribute instanceof DataSourceAttribute) {","                    node.children.push({","                        label: attribute.get('name'),","                        data : attribute","                    });","                } else if (attribute instanceof DataSourceAttributeCollection) {","                    var collection = {","                        label   : attribute.get('name'),","                        data    : attribute,","                        children: []","                    };","","                    Y.Array.each(attribute.get('attributes'), function (subAttribute) {","                        if (subAttribute instanceof DataSourceAttribute) {","                            collection.children.push({","                                label: subAttribute.get('name'),","                                data : subAttribute","                            });","                        }","                    });","","                    node.children.push(collection);","                }","            });","","            items.push(node);","        });","","        return new TreeModel({","            items: items,","            icons: {","                'datagenSource'                : 'icon-list-alt',","                'pdoSource'                    : 'icon-align-justify',","                'xmlSource'                    : 'icon-file',","                'dataSourceAttribute'          : 'icon-minus',","                'dataSourceAttributeCollection': 'icon-th-list'","            }","        });","    },","","    parse: function (response) {","        var items = [];","","        Y.Array.each(Y.JSON.parse(response), function (item) {","            switch (item.type) {","                case 'dataGen':","                    items.push(new DatagenSource(item));","                    break;","                case 'pdo':","                    items.push(new PdoSource(item));","                    break;","                case 'xml':","                    items.push(new XmlSource(item));","                    break;","            }","        });","","        return items;","    },","","    sync: function (action, options, callback) {","        if (action === 'read') {","            Y.io(Routing.generate('rednose_dataprovider_data_sources'), {","                method: 'GET',","                on : {","                    success : function (tx, r) {","                        callback(null, r.responseText);","                    },","                    failure: function (tx, r) {","                        callback(Y.JSON.parse(r.responseText));","                    }","                }","            });","        }","    }","});","","Y.namespace('Rednose.DataSource').DataSource          = DataSource;","Y.namespace('Rednose.DataSource').DataSourceAttribute = DataSourceAttribute;","Y.namespace('Rednose.DataSource').DatagenSource       = DatagenSource;","Y.namespace('Rednose.DataSource').PdoSource           = PdoSource;","Y.namespace('Rednose.DataSource').XmlSource           = XmlSource;","Y.namespace('Rednose.DataSource').DataSourceList      = DataSourceList;","var DataProvider;","","DataProvider = Y.Base.create('dataProvider', Y.Widget, [], {","    ac: null,","","    template:","        '<div class=\"dataprovider-form\">' +","            '<div class=\"input-append\">' +","                '<input type=\"text\" class=\"dataprovider-search\" placeholder=\"{placeholder}\" />' +","                '<button class=\"btn btn dataprovider-button\" type=\"button\">{caption}</button>' +","            '</div>' +","            '<div class=\"ac\"></div>' +","        '</div>',","","    formatterTemplate:","            '<div class=\"entry\">' +","                '<div class=\"hd\">' +","                    '<img src=\"{img}\" class=\"photo\" />' +","                '</div>' +","                '<div class=\"bd\">' +","                    '<div class=\"autocomplete-title\">{title}</div>' +","                    '<div class=\"autocomplete-subtitle\">{subtitle}</div>' +","                '</div>' +","            '</div>',","","    initializer: function() {","        var self          = this,","            container     = this.get('contentBox'),","            route         = 'rednose_dataprovider_data_list',","            id            = this.get('dataProviderId'),","            parameterBag  = this.get('parameterBag'),","            placeHolder   = this.get('placeholder'),","            buttonCaption = this.get('buttonCaption');","","        var defaultFormatter = function(query, raw) {","            return Y.Array.map(raw, function (result) {","                return Y.Lang.sub(","                    self.formatterTemplate,","                    {","                        img     : result.raw.img,","                        title   : result.highlighted,","                        subtitle: result.raw.subtitle","                    }","                );","            });","        };","","        container.append(Y.Lang.sub(this.template, { placeholder: placeHolder, caption: buttonCaption }));","        container.one('.dataprovider-button').on('click', function(e) {","            self._handleComboButton(e);","        });","","        route =","            Routing.generate(route) + '?id=' + id +","            '&parameterbag=' + Y.JSON.stringify(parameterBag) +","            '&q={query}&callback={callback}';","","        this.ac = new Y.AutoCompleteList({","            inputNode        : container.one('.dataprovider-search'),","            resultFormatter  : defaultFormatter,","            minQueryLength   : 0,","            maxResults       : 0,","            resultHighlighter: 'phraseMatch',","            resultListLocator: 'results',","            resultTextLocator: this.get('display_handle'),","            source           : route,","            render           : container.one('.ac')","        });","","        this.ac.after('select', function (e) {","            self.fire('selected', e.result);","        });","","        this.ac.on(","            \"query\",","            function (e) {","                container.one('.dataprovider-button').addClass('dataprovider-spinner');","                container.one('.dataprovider-button').setHTML('&nbsp;');","            }","        );","","        this.ac.after(","            \"results\",","            function (e) {","                container.one('.dataprovider-button').removeClass('dataprovider-spinner');","                container.one('.dataprovider-button').setHTML(self.get('buttonCaption'));","            }","        );","    },","","    _handleComboButton: function (e) {","        var ac = this.ac;","","        e.stopPropagation();","","        if (ac.get('visible')) {","            ac.hide();","        } else {","            if (ac.get('results').length === 0) {","                ac.fire('query');","            }","","            ac.sendRequest();","            ac.show();","        }","    },","}, {","    ATTRS: {","        placeholder: { value: 'Type here to search…' },","        buttonCaption: { value: '…' },","        parameterBag: { value: {} },","        dataProviderId: { value: 'unknown.id' },","        display_handle: { value: 'display_name' },","    }","});","","Y.namespace('Rednose').DataProvider = DataProvider;","","","}, '1.4.1', {","    \"requires\": [","        \"autocomplete\",","        \"autocomplete-filters\",","        \"autocomplete-highlighters\",","        \"base\",","        \"json\",","        \"model\",","        \"model-list\",","        \"rednose-treeview\",","        \"widget\"","    ],","    \"skinnable\": true","});","","}());"]};
}
var __cov_til7agqktOfSE9WGDZUJbA = __coverage__['build/rednose-dataprovider/rednose-dataprovider.js'];
__cov_til7agqktOfSE9WGDZUJbA.s['1']++;YUI.add('rednose-dataprovider',function(Y,NAME){__cov_til7agqktOfSE9WGDZUJbA.f['1']++;__cov_til7agqktOfSE9WGDZUJbA.s['2']++;var TreeModel=Y.Rednose.ModelTree,DataSource,PdoSource,XmlSource,DataSourceList;__cov_til7agqktOfSE9WGDZUJbA.s['3']++;DataSourceAttribute=Y.Base.create('dataSourceAttribute',Y.Model,[],{},{ATTRS:{source:{value:null},name:{value:null}}});__cov_til7agqktOfSE9WGDZUJbA.s['4']++;DataSourceAttributeCollection=Y.Base.create('dataSourceAttributeCollection',Y.Model,[],{},{ATTRS:{source:{value:null},name:{value:null},attributes:{value:[]}}});__cov_til7agqktOfSE9WGDZUJbA.s['5']++;DataSource=Y.Base.create('dataSource',Y.Model,[],{sync:function(action,options,callback){__cov_til7agqktOfSE9WGDZUJbA.f['2']++;__cov_til7agqktOfSE9WGDZUJbA.s['6']++;switch(action){case'create':__cov_til7agqktOfSE9WGDZUJbA.b['1'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['7']++;Y.io(Routing.generate('rednose_dataprovider_post_data_sources'),{method:'POST',data:Y.JSON.stringify(this.toJSON()),on:{success:function(tx,r){__cov_til7agqktOfSE9WGDZUJbA.f['3']++;__cov_til7agqktOfSE9WGDZUJbA.s['8']++;callback(null,r.responseText);},failure:function(tx,r){__cov_til7agqktOfSE9WGDZUJbA.f['4']++;__cov_til7agqktOfSE9WGDZUJbA.s['9']++;callback(Y.JSON.parse(r.responseText));}}});__cov_til7agqktOfSE9WGDZUJbA.s['10']++;break;}},_setAttributes:function(attributes){__cov_til7agqktOfSE9WGDZUJbA.f['5']++;__cov_til7agqktOfSE9WGDZUJbA.s['11']++;var self=this,parsed=[];__cov_til7agqktOfSE9WGDZUJbA.s['12']++;if(Y.Lang.isArray(attributes)){__cov_til7agqktOfSE9WGDZUJbA.b['2'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['13']++;Y.Array.each(attributes,function(attribute){__cov_til7agqktOfSE9WGDZUJbA.f['6']++;__cov_til7agqktOfSE9WGDZUJbA.s['14']++;parsed.push(new DataSourceAttribute({source:self,name:attribute}));});}else{__cov_til7agqktOfSE9WGDZUJbA.b['2'][1]++;__cov_til7agqktOfSE9WGDZUJbA.s['15']++;Y.Object.each(attributes,function(subAttributes,key){__cov_til7agqktOfSE9WGDZUJbA.f['7']++;__cov_til7agqktOfSE9WGDZUJbA.s['16']++;var collection=[];__cov_til7agqktOfSE9WGDZUJbA.s['17']++;Y.Array.each(subAttributes,function(attribute){__cov_til7agqktOfSE9WGDZUJbA.f['8']++;__cov_til7agqktOfSE9WGDZUJbA.s['18']++;collection.push(new DataSourceAttribute({source:self,name:attribute}));});__cov_til7agqktOfSE9WGDZUJbA.s['19']++;parsed.push(new DataSourceAttributeCollection({source:self,name:key,attributes:collection}));__cov_til7agqktOfSE9WGDZUJbA.s['20']++;parsed.push(collection);});}__cov_til7agqktOfSE9WGDZUJbA.s['21']++;return parsed;}},{ATTRS:{name:{value:null},identifier:{value:null},type:{value:'pdo'},attributes:{value:[],setter:'_setAttributes',lazyAdd:false}}});__cov_til7agqktOfSE9WGDZUJbA.s['22']++;DatagenSource=Y.Base.create('datagenSource',DataSource,[],{},{ATTRS:{url:{value:null},username:{value:null},password:{value:null},section:{value:null}}});__cov_til7agqktOfSE9WGDZUJbA.s['23']++;PdoSource=Y.Base.create('pdoSource',DataSource,[],{},{ATTRS:{dsn:{value:null},username:{value:null},password:{value:null},table:{value:null},query:{value:null},source:{value:'table'}}});__cov_til7agqktOfSE9WGDZUJbA.s['24']++;XmlSource=Y.Base.create('xmlSource',DataSource,[],{},{ATTRS:{xsd:{value:null},xslt:{value:null},xml:{value:null},root:{value:null}}});__cov_til7agqktOfSE9WGDZUJbA.s['25']++;DataSourceList=Y.Base.create('dataSourceList',Y.ModelList,[],{model:DataSource,getTree:function(){__cov_til7agqktOfSE9WGDZUJbA.f['9']++;__cov_til7agqktOfSE9WGDZUJbA.s['26']++;var items=[];__cov_til7agqktOfSE9WGDZUJbA.s['27']++;this.each(function(model){__cov_til7agqktOfSE9WGDZUJbA.f['10']++;__cov_til7agqktOfSE9WGDZUJbA.s['28']++;var node={label:model.get('name'),data:model,children:[]};__cov_til7agqktOfSE9WGDZUJbA.s['29']++;Y.Array.each(model.get('attributes'),function(attribute){__cov_til7agqktOfSE9WGDZUJbA.f['11']++;__cov_til7agqktOfSE9WGDZUJbA.s['30']++;if(attribute instanceof DataSourceAttribute){__cov_til7agqktOfSE9WGDZUJbA.b['3'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['31']++;node.children.push({label:attribute.get('name'),data:attribute});}else{__cov_til7agqktOfSE9WGDZUJbA.b['3'][1]++;__cov_til7agqktOfSE9WGDZUJbA.s['32']++;if(attribute instanceof DataSourceAttributeCollection){__cov_til7agqktOfSE9WGDZUJbA.b['4'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['33']++;var collection={label:attribute.get('name'),data:attribute,children:[]};__cov_til7agqktOfSE9WGDZUJbA.s['34']++;Y.Array.each(attribute.get('attributes'),function(subAttribute){__cov_til7agqktOfSE9WGDZUJbA.f['12']++;__cov_til7agqktOfSE9WGDZUJbA.s['35']++;if(subAttribute instanceof DataSourceAttribute){__cov_til7agqktOfSE9WGDZUJbA.b['5'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['36']++;collection.children.push({label:subAttribute.get('name'),data:subAttribute});}else{__cov_til7agqktOfSE9WGDZUJbA.b['5'][1]++;}});__cov_til7agqktOfSE9WGDZUJbA.s['37']++;node.children.push(collection);}else{__cov_til7agqktOfSE9WGDZUJbA.b['4'][1]++;}}});__cov_til7agqktOfSE9WGDZUJbA.s['38']++;items.push(node);});__cov_til7agqktOfSE9WGDZUJbA.s['39']++;return new TreeModel({items:items,icons:{'datagenSource':'icon-list-alt','pdoSource':'icon-align-justify','xmlSource':'icon-file','dataSourceAttribute':'icon-minus','dataSourceAttributeCollection':'icon-th-list'}});},parse:function(response){__cov_til7agqktOfSE9WGDZUJbA.f['13']++;__cov_til7agqktOfSE9WGDZUJbA.s['40']++;var items=[];__cov_til7agqktOfSE9WGDZUJbA.s['41']++;Y.Array.each(Y.JSON.parse(response),function(item){__cov_til7agqktOfSE9WGDZUJbA.f['14']++;__cov_til7agqktOfSE9WGDZUJbA.s['42']++;switch(item.type){case'dataGen':__cov_til7agqktOfSE9WGDZUJbA.b['6'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['43']++;items.push(new DatagenSource(item));__cov_til7agqktOfSE9WGDZUJbA.s['44']++;break;case'pdo':__cov_til7agqktOfSE9WGDZUJbA.b['6'][1]++;__cov_til7agqktOfSE9WGDZUJbA.s['45']++;items.push(new PdoSource(item));__cov_til7agqktOfSE9WGDZUJbA.s['46']++;break;case'xml':__cov_til7agqktOfSE9WGDZUJbA.b['6'][2]++;__cov_til7agqktOfSE9WGDZUJbA.s['47']++;items.push(new XmlSource(item));__cov_til7agqktOfSE9WGDZUJbA.s['48']++;break;}});__cov_til7agqktOfSE9WGDZUJbA.s['49']++;return items;},sync:function(action,options,callback){__cov_til7agqktOfSE9WGDZUJbA.f['15']++;__cov_til7agqktOfSE9WGDZUJbA.s['50']++;if(action==='read'){__cov_til7agqktOfSE9WGDZUJbA.b['7'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['51']++;Y.io(Routing.generate('rednose_dataprovider_data_sources'),{method:'GET',on:{success:function(tx,r){__cov_til7agqktOfSE9WGDZUJbA.f['16']++;__cov_til7agqktOfSE9WGDZUJbA.s['52']++;callback(null,r.responseText);},failure:function(tx,r){__cov_til7agqktOfSE9WGDZUJbA.f['17']++;__cov_til7agqktOfSE9WGDZUJbA.s['53']++;callback(Y.JSON.parse(r.responseText));}}});}else{__cov_til7agqktOfSE9WGDZUJbA.b['7'][1]++;}}});__cov_til7agqktOfSE9WGDZUJbA.s['54']++;Y.namespace('Rednose.DataSource').DataSource=DataSource;__cov_til7agqktOfSE9WGDZUJbA.s['55']++;Y.namespace('Rednose.DataSource').DataSourceAttribute=DataSourceAttribute;__cov_til7agqktOfSE9WGDZUJbA.s['56']++;Y.namespace('Rednose.DataSource').DatagenSource=DatagenSource;__cov_til7agqktOfSE9WGDZUJbA.s['57']++;Y.namespace('Rednose.DataSource').PdoSource=PdoSource;__cov_til7agqktOfSE9WGDZUJbA.s['58']++;Y.namespace('Rednose.DataSource').XmlSource=XmlSource;__cov_til7agqktOfSE9WGDZUJbA.s['59']++;Y.namespace('Rednose.DataSource').DataSourceList=DataSourceList;__cov_til7agqktOfSE9WGDZUJbA.s['60']++;var DataProvider;__cov_til7agqktOfSE9WGDZUJbA.s['61']++;DataProvider=Y.Base.create('dataProvider',Y.Widget,[],{ac:null,template:'<div class="dataprovider-form">'+'<div class="input-append">'+'<input type="text" class="dataprovider-search" placeholder="{placeholder}" />'+'<button class="btn btn dataprovider-button" type="button">{caption}</button>'+'</div>'+'<div class="ac"></div>'+'</div>',formatterTemplate:'<div class="entry">'+'<div class="hd">'+'<img src="{img}" class="photo" />'+'</div>'+'<div class="bd">'+'<div class="autocomplete-title">{title}</div>'+'<div class="autocomplete-subtitle">{subtitle}</div>'+'</div>'+'</div>',initializer:function(){__cov_til7agqktOfSE9WGDZUJbA.f['18']++;__cov_til7agqktOfSE9WGDZUJbA.s['62']++;var self=this,container=this.get('contentBox'),route='rednose_dataprovider_data_list',id=this.get('dataProviderId'),parameterBag=this.get('parameterBag'),placeHolder=this.get('placeholder'),buttonCaption=this.get('buttonCaption');__cov_til7agqktOfSE9WGDZUJbA.s['63']++;var defaultFormatter=function(query,raw){__cov_til7agqktOfSE9WGDZUJbA.f['19']++;__cov_til7agqktOfSE9WGDZUJbA.s['64']++;return Y.Array.map(raw,function(result){__cov_til7agqktOfSE9WGDZUJbA.f['20']++;__cov_til7agqktOfSE9WGDZUJbA.s['65']++;return Y.Lang.sub(self.formatterTemplate,{img:result.raw.img,title:result.highlighted,subtitle:result.raw.subtitle});});};__cov_til7agqktOfSE9WGDZUJbA.s['66']++;container.append(Y.Lang.sub(this.template,{placeholder:placeHolder,caption:buttonCaption}));__cov_til7agqktOfSE9WGDZUJbA.s['67']++;container.one('.dataprovider-button').on('click',function(e){__cov_til7agqktOfSE9WGDZUJbA.f['21']++;__cov_til7agqktOfSE9WGDZUJbA.s['68']++;self._handleComboButton(e);});__cov_til7agqktOfSE9WGDZUJbA.s['69']++;route=Routing.generate(route)+'?id='+id+'&parameterbag='+Y.JSON.stringify(parameterBag)+'&q={query}&callback={callback}';__cov_til7agqktOfSE9WGDZUJbA.s['70']++;this.ac=new Y.AutoCompleteList({inputNode:container.one('.dataprovider-search'),resultFormatter:defaultFormatter,minQueryLength:0,maxResults:0,resultHighlighter:'phraseMatch',resultListLocator:'results',resultTextLocator:this.get('display_handle'),source:route,render:container.one('.ac')});__cov_til7agqktOfSE9WGDZUJbA.s['71']++;this.ac.after('select',function(e){__cov_til7agqktOfSE9WGDZUJbA.f['22']++;__cov_til7agqktOfSE9WGDZUJbA.s['72']++;self.fire('selected',e.result);});__cov_til7agqktOfSE9WGDZUJbA.s['73']++;this.ac.on('query',function(e){__cov_til7agqktOfSE9WGDZUJbA.f['23']++;__cov_til7agqktOfSE9WGDZUJbA.s['74']++;container.one('.dataprovider-button').addClass('dataprovider-spinner');__cov_til7agqktOfSE9WGDZUJbA.s['75']++;container.one('.dataprovider-button').setHTML('&nbsp;');});__cov_til7agqktOfSE9WGDZUJbA.s['76']++;this.ac.after('results',function(e){__cov_til7agqktOfSE9WGDZUJbA.f['24']++;__cov_til7agqktOfSE9WGDZUJbA.s['77']++;container.one('.dataprovider-button').removeClass('dataprovider-spinner');__cov_til7agqktOfSE9WGDZUJbA.s['78']++;container.one('.dataprovider-button').setHTML(self.get('buttonCaption'));});},_handleComboButton:function(e){__cov_til7agqktOfSE9WGDZUJbA.f['25']++;__cov_til7agqktOfSE9WGDZUJbA.s['79']++;var ac=this.ac;__cov_til7agqktOfSE9WGDZUJbA.s['80']++;e.stopPropagation();__cov_til7agqktOfSE9WGDZUJbA.s['81']++;if(ac.get('visible')){__cov_til7agqktOfSE9WGDZUJbA.b['8'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['82']++;ac.hide();}else{__cov_til7agqktOfSE9WGDZUJbA.b['8'][1]++;__cov_til7agqktOfSE9WGDZUJbA.s['83']++;if(ac.get('results').length===0){__cov_til7agqktOfSE9WGDZUJbA.b['9'][0]++;__cov_til7agqktOfSE9WGDZUJbA.s['84']++;ac.fire('query');}else{__cov_til7agqktOfSE9WGDZUJbA.b['9'][1]++;}__cov_til7agqktOfSE9WGDZUJbA.s['85']++;ac.sendRequest();__cov_til7agqktOfSE9WGDZUJbA.s['86']++;ac.show();}}},{ATTRS:{placeholder:{value:'Type here to search\u2026'},buttonCaption:{value:'\u2026'},parameterBag:{value:{}},dataProviderId:{value:'unknown.id'},display_handle:{value:'display_name'}}});__cov_til7agqktOfSE9WGDZUJbA.s['87']++;Y.namespace('Rednose').DataProvider=DataProvider;},'1.4.1',{'requires':['autocomplete','autocomplete-filters','autocomplete-highlighters','base','json','model','model-list','rednose-treeview','widget'],'skinnable':true});
