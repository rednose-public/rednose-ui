YUI.add("rednose-app-base",function(e,t){var n="rednose-spinner",r=1088,i=640,s=e.Base.create("app",e.App,[],{DEBUG:!1,_activePanel:null,_backgroundView:null,initializer:function(){this.DEBUG&&(e.Transition.fx["app:fadeIn"].duration=1,e.Transition.fx["app:fadeOut"].duration=1,e.Transition.fx["app:slideRight"].duration=1,e.Transition.fx["app:slideLeft"].duration=1),e.Do.after(function(){window.self!==window.top&&typeof (window.parent.openApp()==="function")&&window.parent.openApp()},this,"render",this)},destructor:function(){this._activePanel&&this._activePanel.destroy(),this._activePanel=null},closeApp:function(){window.self!==window.top&&typeof (window.parent.closeApp()==="function")&&window.parent.closeApp()},popModalView:function(){var e=this.get("activeView"),t=this.getViewInfo(e);t.modal&&this._backgroundView&&this.showView(this._backgroundView)},showView:function(t,n,r,i){var o=this,u=this.getViewInfo(t);if(u.modal||this.get("activeView")&&this.getViewInfo(this.get("activeView")).modal)r=r||{},r.transition=!1;u.lazyload?(s.showSpinner(),e.use(u.lazyload,function(){s.hideSpinner(),s.superclass.showView.apply(o,[t,n,r,i])})):s.superclass.showView.apply(o,[t,n,r,i])},_detachView:function(t){if(!t)return;if(this.getViewInfo(this.get("activeView")).modal){this._backgroundView=t,t.removeTarget(this);return}this._activePanel&&this._activePanel.destroy();var n=this.getViewInfo(t)||{};n.preserve?t.remove():(t.destroy({remove:!0}),delete this._viewInfoMap[e.stamp(t,!0)],t===n.instance&&delete n.instance),t.removeTarget(this)},_attachView:function(t,n){if(!t)return;var s=this.getViewInfo(t),o=this.get("viewContainer");t.addTarget(this),s&&(s.instance=t);if(s.modal)typeof s.instance.get("panel")=="undefined"&&(this._activePanel=new e.Rednose.Panel({srcNode:t.get("container"),width:s.width||r,height:s.height||i}),this._activePanel.render(),typeof t.sizeView=="function"&&t.sizeView(this._activePanel.get("boundingBox")));else{if(this._backgroundView){this._backgroundView=null;return}typeof t.sizeView=="function"&&t.sizeView(o),t.get("container").inDoc()===!1&&o[n?"prepend":"append"](t.get("container"))}}},{ATTRS:{linkSelector:{value:null}}});s.showSpinner=function(){e.one("body").prepend(e.Node.create('<div class="'+n+'"></div>'))},s.hideSpinner=function(){e.all("."+n).remove()},e.namespace("Rednose").App=s},"1.1.0-DEV",{requires:["app-base","event-custom","rednose-app-templates","rednose-panel"]});
