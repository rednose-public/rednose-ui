YUI.add("rednose-dialog",function(e,t){var n="rednose-widget",r="rednose-dialog",i="pull-right",s="btn",o="btn-warning",u="btn-primary",a="btn-danger",f="OK",l="Cancel",c=e.Base.create("dialog",e.Widget,[],{initializer:function(){var t=this;this.after("errorChange",this._setError,this),e.on("keydown",function(e){e.keyCode===27&&t.destroy()})},destructor:function(){this.get("panel")&&this.get("panel").destroy()},alert:function(t,n,r){var i=this,s,u;r?s=e.Node.create('<div class="icon dialog_warning_icon"></div><div><p>'+n+"</p></div>"):s=e.Node.create('<div class="icon dialog_error_icon"></div><div><p>'+n+"</p></div>"),u=(new e.Rednose.Panel({bodyContent:s,headerContent:t,zIndex:e.all("*").size(),width:this.get("width"),buttons:[{value:f,section:e.WidgetStdMod.FOOTER,isDefault:!0,action:function(){i.destroy()},classNames:"btn "+(r?o:a)}]})).render(),this._setPanelStyle(u),this.set("panel",u)},confirm:function(t,n,r,i,a){var c=this,h,p;i=typeof i!="undefined"?i:!1,a=typeof a!="undefined"?a:f,h=e.Node.create('<div class="icon '+(i?"dialog_warning_icon":"dialog_prompt_icon")+'"></div>'+"<div><p>"+n+"</p></div>"),p=(new e.Rednose.Panel({bodyContent:h,headerContent:t,zIndex:e.all("*").size(),width:this.get("width"),buttons:[{value:l,section:e.WidgetStdMod.FOOTER,isDefault:!1,action:function(){c.destroy()},classNames:s},{value:a,section:e.WidgetStdMod.FOOTER,isDefault:!0,action:function(){r&&r(),c.destroy()},classNames:s+" "+(i?o:u)}]})).render(),this._setPanelStyle(p),this.set("panel",p)},prompt:function(t,n,r,i,o,a){var c=this,h,p;a=typeof a!="undefined"?a:f,r===null&&(r=""),o?(typeof o=="string"?input=e.Node.create(o):input=o,h=e.Node.create('<form action="#" class="form-horizontal"></form>'),h.append(input)):(input=e.Node.create('<input type="text" value="'+r+'" data-path="input" id="input">'),h=e.Node.create('<form action="#" class="form-horizontal">   <div class="icon icon_absolute dialog_prompt_icon"></div>   <div class="control-group">       <label for="input" class="control-label">'+n+"</label>"+'       <div class="controls"></div>'+"   </div>"+"</form>"),h.one(".controls").append(input)),p=(new e.Rednose.Panel({bodyContent:h,headerContent:t,zIndex:e.all("*").size(),width:this.get("width"),buttons:[{value:l,section:e.WidgetStdMod.FOOTER,action:function(){c.destroy()},classNames:s},{value:a,section:e.WidgetStdMod.FOOTER,isDefault:!0,action:function(){i!==null&&i(h)===!0&&c.destroy()},classNames:s+" "+u}]})).render(),h.one("input,textarea,select").focus().select(),h.one("input,textarea,select").on("keyup",function(t){if(t.button===13){var n=p.get("buttons");e.Array.each(n.footer,function(e){e.hasClass(u)&&e.simulate("click")})}}),this._setPanelStyle(p),this.set("panel",p)},_setPanelStyle:function(e){var t=e.get("boundingBox");t.addClass(n),t.addClass(r),t.one(".yui3-widget-buttons").addClass(i),t.all(".yui3-button").each(function(e){e.removeClass("yui3-button").removeClass("yui3-button-primary")})},_setError:function(e){var t=e.newVal,n=this.get("panel").get("boundingBox"),r;n.all(".control-group").each(function(e){e.hasClass("error")&&e.removeClass("error"),e.all(".help-block").remove()}),r=n.one("[data-path="+t.path+"]"),r.ancestor(".control-group").addClass("error"),t.message&&r.get("parentNode").append('<span class="help-block">'+t.message+"</span>"),r.focus()}},{ATTRS:{error:{value:{}},panel:{value:null},width:{value:500}}});c.alert=function(e,t,n){var r=new c;return r.alert(e,t,n),r},c.confirm=function(e,t,n,r,i){var s=new c;return s.confirm(e,t,n,r,i),s},c.prompt=function(e,t,n,r,i,s){var o=new c;return o.confirm(e,message,r,warning,s),o},e.namespace("Rednose").Dialog=c},"1.1.0-DEV",{group:"rednose-ui",requires:["dd","dd-plugin","json-parse","rednose-panel","node","node-event-simulate","widget"],skinnable:!0});
