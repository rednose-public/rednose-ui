YUI.add("rednose-dialog",function(e,t){var n="rednose-widget",r="rednose-dialog",i="pull-right",s="btn",o="btn-warning",u="btn-primary",a="btn-danger",f="btn-info",l="btn-success",c="OK",h="Cancel",p="default",d="info",v="success",m="warning",g="danger",y="error",b=e.Base.create("dialog",e.Widget,[],{initializer:function(){var t=this;this.after("errorChange",this._setError,this),e.on("keydown",function(e){e.keyCode===27&&t.destroy()})},destructor:function(){this.get("panel")&&this.get("panel").destroy()},alert:function(t){t||(t={});var n=this,r,i;t=e.mix(t,{title:"",text:"",type:p,confirm:c}),r=e.Node.create("<div><p>"+t.text+"</p></div>"),i=(new e.Rednose.Panel({bodyContent:r,headerContent:t.title,zIndex:e.all("*").size(),width:this.get("width"),buttons:[{value:t.confirm,section:e.WidgetStdMod.FOOTER,isDefault:!0,action:function(){n.destroy()},classNames:s+" "+this._getButtonForType(t.type)}]})).render(),this._setPanelStyle(i),this.set("panel",i)},confirm:function(t,n){t||(t={});var r=this,i,o;t=e.mix(t,{title:"",text:"",type:p,confirm:c,cancel:h}),i=e.Node.create("<div><p>"+t.text+"</p></div>"),o=(new e.Rednose.Panel({bodyContent:i,headerContent:t.title,zIndex:e.all("*").size(),width:this.get("width"),buttons:[{value:t.cancel,section:e.WidgetStdMod.FOOTER,isDefault:!1,action:function(){r.destroy()},classNames:s},{value:t.confirm,section:e.WidgetStdMod.FOOTER,isDefault:!0,action:function(){typeof n=="function"&&n(),r.destroy()},classNames:s+" "+this._getButtonForType(t.type)}]})).render(),this._setPanelStyle(o),this.set("panel",o)},prompt:function(t,n){t||(t={});var r=this,i,o;t=e.mix(t,{title:"",text:"",type:p,confirm:c,cancel:h,value:"",html:null}),t.html?(typeof t.html=="string"?input=e.Node.create(t.html):input=t.html,i=e.Node.create('<form action="#" class="form-horizontal"></form>'),i.append(input)):(input=e.Node.create('<input type="text" value="'+t.value+'" data-path="input" id="input">'),i=e.Node.create('<form action="#" class="form-horizontal">   <div class="control-group">       <label for="input" class="control-label">'+t.text+"</label>"+'       <div class="controls"></div>'+"   </div>"+"</form>"),i.one(".controls").append(input)),o=(new e.Rednose.Panel({bodyContent:i,headerContent:t.title,zIndex:e.all("*").size(),width:this.get("width"),buttons:[{value:t.cancel,section:e.WidgetStdMod.FOOTER,action:function(){r.destroy()},classNames:s},{value:t.confirm,section:e.WidgetStdMod.FOOTER,isDefault:!0,action:function(){typeof n=="function"&&n(i)===!0&&r.destroy()},classNames:s+" "+this._getButtonForType(t.type)}]})).render(),i.one("input,textarea,select").focus().select(),i.one("input,textarea,select").on("keyup",function(t){if(t.button===13){var n=o.get("buttons");e.Array.each(n.footer,function(e){e.hasClass(u)&&e.simulate("click")})}}),this._setPanelStyle(o),this.set("panel",o)},_setPanelStyle:function(e){var t=e.get("boundingBox");t.addClass(n),t.addClass(r),t.one(".yui3-widget-buttons").addClass(i),t.all(".yui3-button").each(function(e){e.removeClass("yui3-button").removeClass("yui3-button-primary")})},_getButtonForType:function(e){switch(e){case p:return u;case d:return f;case v:return l;case m:return o;case g:case y:return a;default:return u}},_setError:function(e){var t=e.newVal,n=this.get("panel").get("boundingBox"),r;n.all(".control-group").each(function(e){e.hasClass("error")&&e.removeClass("error"),e.all(".help-block").remove()}),r=n.one("[data-path="+t.path+"]"),r.ancestor(".control-group").addClass("error"),t.message&&r.get("parentNode").append('<span class="help-block">'+t.message+"</span>"),r.focus()}},{ATTRS:{error:{value:{}},panel:{value:null},width:{value:500}}});b.alert=function(e){var t=new b;return t.alert(e),t},b.confirm=function(e,t){var n=new b;return n.confirm(e,t),n},b.prompt=function(e,t){var n=new b;return n.prompt(e,t),n},e.namespace("Rednose").Dialog=b},"1.1.0-DEV",{requires:["dd","dd-plugin","json-parse","rednose-dialog-css","rednose-panel","node","node-event-simulate","widget"]});
