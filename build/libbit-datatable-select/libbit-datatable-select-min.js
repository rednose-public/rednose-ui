YUI.add("libbit-datatable-select",function(e,t){function n(e){n.superclass.constructor.apply(this,arguments)}n.NAME="dataTableSelectPlugin",n.NS="selectable",n.ATTRS={selectedRow:{value:null}},e.extend(n,e.Plugin.Base,{initializer:function(){var e=this.get("host"),t=e.get("contentBox");this.after("selectedRowChange",this._afterSelectedRowChange,this),t.on("click",this._handleClick,this)},_handleClick:function(e){var t=e.target;if(t.ancestor(".yui3-datatable-data tr"))this.set("selectedRow",t.ancestor(".yui3-datatable-data tr"));else{if(t.ancestor(".yui3-datatable-columns"))return!1;this.set("selectedRow",null)}return!0},_afterSelectedRowChange:function(t){var n=this.get("host"),r=t.newVal,i=t.prevVal,s=null;return r===i?!1:(i&&(i.all("td").removeClass("datatable-selected"),i.one("i")&&i.one("i").hasClass("icon-white")&&i.one("i").removeClass("icon-white")),e.Lang.isNull(r)===!1&&(r.all("td").addClass("datatable-selected"),r.one("i")&&r.one("i").addClass("icon-white"),s=this._getModelFromTableRow(r)),n.fire("select",{model:s}),!0)},_getModelFromTableRow:function(e){var t=e.getAttribute("data-yui3-record"),n=this.get("host").data;return n.getByClientId(t)}}),e.namespace("Libbit").DataTableSelectPlugin=n},"1.0.0",{requires:["libbit-datatable","plugin"]});
