YUI.add("rednose-button-group",function(e,t){var n="reset",r=e.Base.create("buttonGroupBase",e.Base,[],{initializer:function(e){this._published={},e.buttons&&this.reset(e.buttons)},destructor:function(){if(this._buttonMap&&this._buttonMap.length>0)for(var e=0;e<this._buttonMap.length;e++)this._destroyButton(this._buttonMap[e]);this._buttonMap=null,this._published=null},reset:function(e){return this._published[n]||(this._published[n]=this.publish(n,{defaultFn:this._defResetFn})),this.fire(n,{buttons:e}),this},getButtonById:function(e){return this._buttonMap[e]},_createButton:function(t){var n=new e.Rednose.Button(t);return this._buttonMap[n.id]=n,n.addTarget(this),n},_destroyButton:function(e){e.destroy(),e.removeTarget(this),delete this._buttonMap[e.id]},_defResetFn:function(e){var t=e.buttons,n;if(this._buttonMap&&this._buttonMap.length>0)for(n=0;n<this._buttonMap.length;n++)this._destroyButton(this._buttonMap[n]);this._buttonMap={};if(t)for(n=0;n<t.length;n++)this._createButton(t[n])}});e.namespace("Rednose.ButtonGroup").Base=r;var i="click",s="change",o=e.Base.create("buttonGroup",e.Rednose.ButtonGroup.Base,[e.View],{classNames:{group:"btn-group",vertical:"btn-group-vertical"},initializer:function(e){this.type=e.type||"default",this._value=null,this._attachButtonGroupEvents()},destructor:function(){this._detachButtonGroupEvents()},_attachButtonGroupEvents:function(){this._buttonGroupEvents||(this._buttonGroupEvents=[]),this.type!=="default"&&this._buttonGroupEvents.push(this.after("button:click",this._afterButtonClick,this))},_detachButtonGroupEvents:function(){(new e.EventHandle(this._buttonGroupEvents)).detach()},render:function(){var t=this.get("container"),n=this.classNames;return t.addClass(n.group),this.get("vertical")&&t.addClass(n.vertical),e.Object.each(this._buttonMap,function(e){t.append(e.render().get("container"))}),this},getValue:function(){var t=[];return e.Object.each(this._buttonMap,function(e){e.isActive()&&t.push(e.id)}),this.type==="radio"?t[0]||null:t},_afterButtonClick:function(e){var t=e.button;switch(this.type){case"radio":this._prevButton&&this._prevButton.deactivate(),t.activate();break;case"checkbox":t.toggle()}this._published[i]||(this._published[i]=this.publish(i,{defaultFn:this._defClickFn})),this.fire(i,{button:t}),this._prevButton=t},_defClickFn:function(e){var t=this.getValue();t!==this._prevVal&&this.fire(s,{value:this.getValue()}),this._prevVal=t}},{ATTRS:{vertical:{value:!1,writeOnce:"initOnly"}}});e.namespace("Rednose").ButtonGroup=o},"1.4.0",{requires:["rednose-button"]});
