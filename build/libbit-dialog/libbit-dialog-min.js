YUI.add("libbit-dialog",function(e,t){function n(e){n.superclass.constructor.apply(this,arguments)}n.NAME="dialog",n.ATTRS={error:{value:null}},e.extend(n,e.Widget,{callback:null,callbackCancel:null,wHandleCollection:[],initializer:function(){this.after("errorChange",this._setError,this)},_setError:function(e){var t=e.newVal,n=this.panel.panelObject.get("boundingBox"),r;n.all(".control-group").each(function(e){e.hasClass("error")&&e.removeClass("error"),e.all(".help-block").remove()}),r=n.one("[data-path="+t.path+"]"),r.ancestor(".control-group").addClass("error"),r.get("parentNode").append('<span class="help-block">'+t.message+"</span>"),r.focus()},hide:function(){this.panel.panelObject.destroy()},message:function(e,t,n,r){typeof t=="undefined"&&(t=!1),typeof n=="undefined"&&(n=function(){}),this.callback=n,r===null&&(r="Message"),this.panel("message",e,r),t===!0&&this.panel.MessageNode.get("parentNode").one("div.dialog_message_icon").removeClass("dialog_message_icon").addClass("dialog_warning_icon")},prompt:function(t,n,r,i,s,o,u){var a=this;typeof i=="undefined"&&(i=function(){}),typeof s=="undefined"&&(s=function(){}),this.callback=i,this.callbackCancel=s,o===null&&(o="Question"),e.Lang.isUndefined(u)&&(u="Confirm"),this.panel("prompt","...",o,u),this.panel.MessageNode.set("innerHTML",'<div class="form-horizontal"><div class="control-group"><label class="control-label" for="promptInput">'+n+"</label>"+'<div class="controls">'+'<input data-path="'+n.toLowerCase()+'" type="text" id="promptInput" value="'+r+'"/>'+"</div>"+"</div>"+"</div>"),this.panel.MessageNode.one("input").focus().select(),this.panel.MessageNode.one("input").on("keyup",function(e){e.button===13&&a.callback(a.panel.MessageNode.one("input").get("value"))})},errorMessage:function(t,n){var r="",i=e.JSON.parse(t);typeof n=="undefined"&&(n=function(){}),this.callback=n,r='<div class="dialog_error">'+i.message+"</div>"+'<div class="dialog_path">Source: '+i.path+"</div>",this.panel("error",r,"Error")},confirm:function(t,n,r,i,s,o){typeof o=="undefined"&&(o=!1),typeof n=="undefined"&&(n=function(){}),typeof r=="undefined"&&(r=function(){}),this.callback=n,this.callbackCancel=r,i===null&&(i="Question"),e.Lang.isUndefined(s)&&(s="Confirm"),this.panel("confirm",t,i,s),o===!0&&this.panel.MessageNode.get("parentNode").one("div.dialog_confirm_icon").removeClass("dialog_confirm_icon").addClass("dialog_warning_icon")},window:function(t,n,r,i,s,o,u){var a=e.Node.create('<div class="libbit-dialog-window" />'),f=e.Node.create('<div class="yui3-widget-bd"></div>'),l;return a.append(f),typeof s=="string"?f.setHTML(s):typeof s=="object"&&s!==null?f.setContent(s):typeof o=="string"&&(l=e.Node.create('<div class="libbit-dialog-window-wrapper">Loading...</div>'),f.appendChild(l),(new e.Dispatcher({node:l,ioConfig:{method:"GET"}})).set("uri",o)),this.Window.panelObject=new e.Panel({srcNode:a,headerContent:n,width:i,height:r,zIndex:parseInt(e.all("*").size(),10),centered:!0,modal:!0,visible:!1,render:!0,buttons:u}),this.Window.panelObject.show(),this.Window.panelObject},panel:function(t,n,r,i){var s=this,o=e.Node.create("<div/>"),u;e.Lang.isUndefined(i)&&(i="Confirm"),o.appendChild(e.Node.create('<div class="yui3-widget-bd"><div class="icon dialog_'+t+'_icon"></div>'+"<div>"+n+"</div>"+"</div>")),u=[{value:"Cancel",section:e.WidgetStdMod.FOOTER,action:function(e){s.panel.panelObject.hide(),s.callbackCancel()}}],(t==="confirm"||t==="prompt")&&u.push({value:i,section:e.WidgetStdMod.FOOTER,isDefault:!0,action:function(e){t==="prompt"?s.callback(s.panel.MessageNode.one("input").get("value")):s.callback()}}),this.panel.panelObject=new e.Panel({srcNode:o,headerContent:r,zIndex:e.all("*").size(),width:500,centered:!0,modal:!0,visible:!1,render:!0,buttons:u}),this.panel.MessageNode=o.one("div.yui3-widget-bd"),this.panel.MessageNode.setStyle("max-height","400px"),this.panel.panelObject.get("boundingBox").addClass("libbit-dialog"),this.panel.panelObject.show()}}),e.namespace("Libbit").Dialog=n},"1.0.0",{requires:["dd","dd-plugin","gallery-dispatcher","json-parse","node","panel","widget"],skinnable:!0});
