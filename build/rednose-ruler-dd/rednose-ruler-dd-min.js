YUI.add("rednose-ruler-dd",function(e,t){function n(){}n.prototype={_resizeMap:[],initializer:function(){this._rulerDDEvents=[e.Do.after(this._afterRender,this,"render",this),this.on({"drag:drag":this._setRulerStyles,"drag:mouseDown":this._showSizes,"drag:end":this._showSizes},this)],this._createHandles()},destructor:function(){(new e.EventHandle(this._rulerDDEvents)).detach(),e.Object.each(this._resizeMap,function(e){e.destroy({remove:!0})}),this._resizeMap={},this._rulerDDEvents=null},_handleItemEvent:function(){},_onKeydown:function(e){},_afterRender:function(){var e=this.get("container");e.prepend(this._marginLeft),e.append(this._marginRight),this._setRulerStyles()},_createHandles:function(){this._marginLeft=e.Node.create('<div class="margin-left"><span style="display: none;">10mm</span></div>'),this._marginRight=e.Node.create('<div class="margin-right"><span style="display: none;">10mm</span></div>'),this.get("leftSize")?this._marginLeft.setStyle(this.sizeType,this.get("leftSize")):this._marginLeft.setStyle(this.sizeType,this.get("defaultOffset")),this.get("rightSize")?this._marginRight.setStyle(this.sizeType,this.get("rightSize")):this._marginRight.setStyle(this.sizeType,this.get("defaultOffset")),this.get("vertical")?(this._createResize(this._marginLeft,"b"),this._createResize(this._marginRight,"t")):(this._createResize(this._marginLeft,"r"),this._createResize(this._marginRight,"l"))},_createResize:function(t,n){var r=new e.Resize({node:t,handles:n});r.addTarget(this),this._resizeMap.push(r)},_setRulerStyles:function(e){var t=this.get("container"),n=this.sizeType,r=t.one(".inner-ruler"),i=parseFloat(this._marginLeft.getComputedStyle(n)),s=parseFloat(this._marginRight.getComputedStyle(n)),o=this.get("size")-i-s;isNaN(o)&&(o=this.get("size")-this.get("defaultOffset")*2,i=this.get("defaultOffset")),t.one(".margin-left span").setHTML(this._getMMSize(i)),t.one(".margin-right span").setHTML(this._getMMSize(s)),this.get("vertical")?r.setStyles({marginTop:i,height:o}):r.setStyles({marginLeft:i,width:o})},_getMMSize:function(t){var n=e.Number.format(this._pixelMillimeter(t),{thousandsSeparator:".",decimalSeparator:",",decimalPlaces:2,suffix:" MM"});return n},_showSizes:function(e){var t=this.get("container").all(".margin-left span, .margin-right span");e.type==="drag:mouseDown"&&e.ev.shiftKey?t.show():t.hide()}},n.ATTRS={defaultOffset:{value:100},leftSize:{value:null},rightSize:{value:null}},e.Rednose.Ruler.DD=n,e.Base.mix(e.Rednose.Ruler,[n])},"1.5.0-DEV",{requires:["rednose-ruler-base","resize","datatype-number"]});
