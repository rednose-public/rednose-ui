YUI.add("libbit-contextmenu",function(e,t){var n;n=e.Base.create("contextMenu",e.Plugin.Base,[],{_contextMenu:null,initializer:function(e){var t=e.host,n=e.content?e.content:"",r=e.bubbleTarget;this._node=t,this._content=n,this.addTarget(r),t.on("contextmenu",this._handleContextMenu,this)},_handleContextMenu:function(t){var n=this._node,r=this._contextMenu,i=this._content;e.all(".libbit-context-open").each(function(e){e.removeClass(".libbit-context-open"),e.contextMenu.destroy()}),t.preventDefault(),r=new e.Overlay({bodyContent:i,visible:!1,constrain:!0,zIndex:e.all("*").size(),render:!0}),n.addClass("libbit-context-open"),n.contextMenu=r,r.get("boundingBox").addClass("libbit-context-menu"),r.get("boundingBox").setStyle("left",t.pageX),r.get("boundingBox").setStyle("top",t.pageY),r.show(),this._contextMenu=r,this._bindContextMenu()},_bindContextMenu:function(){var e=this,t=this._node,n=this._contextMenu;n.get("boundingBox").all("a").on(["click","contextmenu"],function(r){var i=r.currentTarget;r.preventDefault(),e.fire(i.getAttribute("data-event"),{node:t}),n.destroy()}),n.get("boundingBox").all("li").on("mouseenter",function(e){var t=e.currentTarget;t.one("i")&&t.one("i").addClass("icon-white")}),n.get("boundingBox").all("li").on("mouseleave",function(e){var t=e.currentTarget;t.one("i")&&t.one("i").hasClass("icon-white")&&t.one("i").removeClass("icon-white")}),n.get("boundingBox").on("clickoutside",function(){n.destroy()})}},{NS:"contextMenu",ATTRS:{}}),e.namespace("Libbit").ContextMenu=n},"1.0.0",{requires:["base","panel","plugin","widget"]});
